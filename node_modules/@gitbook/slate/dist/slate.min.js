!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("immutable")):"function"==typeof define&&define.amd?define(["exports","immutable"],t):t(e.Slate={},e.Immutable)}(this,function(e,t){"use strict";var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var o,a=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=!0,o=Symbol("STORE_KEY"),a=Symbol("LEAF"),i=Symbol("undefined"),s=Symbol("null"),u=void 0,c=new WeakMap;t.default=function(e,t){var l=!0,f=!1,d=void 0;try{for(var y,h=function(){var t=y.value,l=e[t];if(!l)throw new Error('Object does not have a property named "'+t+'".');e[t]=function(){for(var e=arguments.length,f=Array(e),d=0;d<e;d++)f[d]=arguments[d];if(!n)return l.apply(this,f);c.has(this)||c.set(this,{noArgs:{},hasArgs:{}});var y=c.get(this),h=y.noArgs,v=y.hasArgs,p=0!==f.length,g=void 0,k=[];if((g=p?function(e,t){var n=!0,c=!1,l=void 0;try{for(var f,d=t[Symbol.iterator]();!(n=(f=d.next()).done);n=!0){var y=f.value;if(void 0===y?y=i:null===y&&(y=s),(e="object"===(void 0===y?"undefined":r(y))?e[o]&&e[o].get(y):e[y])===u)return u}}catch(e){c=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(c)throw l}}return e[a]}(v,k=[t].concat(f)):h[t])!==u)return g===i?void 0:g;var m=l.apply(this,f),b=void 0===m?i:m;return p?function(e,t,n){var u=e,c=!0,l=!1,f=void 0;try{for(var d,y=t[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var h=d.value;if(void 0===h?h=i:null===h&&(h=s),"object"===(void 0===h?"undefined":r(h)))if(u[o]||(u[o]=new WeakMap),u[o].has(h))u=u[o].get(h);else{var v={};u[o].set(h,v),u=v}else u[h]||(u[h]={}),u=u[h]}}catch(e){l=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(l)throw f}}u[a]=n}(v,k,b):h[t]=b,m}},v=t[Symbol.iterator]();!(l=(y=v.next()).done);l=!0)h()}catch(e){f=!0,d=e}finally{try{!l&&v.return&&v.return()}finally{if(f)throw d}}},t.resetMemoization=function(){c=new WeakMap},t.useMemoization=function(e){n=e}}),i=(o=a)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,s=a.resetMemoization,u=a.useMemoization,c=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)};function l(e){return!0===c(e)&&"[object Object]"===Object.prototype.toString.call(e)}var f=function(e){var t,r;return!1!==l(e)&&("function"==typeof(t=e.constructor)&&(!1!==l(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))},d="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},y=void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function h(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}var p=h,g=v;function k(e){if(p===setTimeout)return setTimeout(e,0);if((p===h||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}"function"==typeof y.setTimeout&&(p=setTimeout),"function"==typeof y.clearTimeout&&(g=clearTimeout);var m,b=[],A=!1,O=-1;function w(){A&&m&&(A=!1,m.length?b=m.concat(b):O=-1,b.length&&x())}function x(){if(!A){var e=k(w);A=!0;for(var t=b.length;t;){for(m=b,b=[];++O<t;)m&&m[O].run();O=-1,t=b.length}m=null,A=!1,function(e){if(g===clearTimeout)return clearTimeout(e);if((g===v||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(e);try{g(e)}catch(t){try{return g.call(null,e)}catch(t){return g.call(this,e)}}}(e)}}function S(e,t){this.fun=e,this.array=t}S.prototype.run=function(){this.fun.apply(null,this.array)};function B(){}var F=B,T=B,K=B,j=B,_=B,E=B,C=B;var N=y.performance||{},z=N.now||N.mozNow||N.msNow||N.oNow||N.webkitNow||function(){return(new Date).getTime()};var P=new Date;var L={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];b.push(new S(e,t)),1!==b.length||A||k(x)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:F,addListener:T,once:K,off:j,removeListener:_,removeAllListeners:E,emit:C,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*z.call(N),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-P)/1e3}},D=void 0!==L&&L.env&&!0,M="undefined"!=typeof console&&"function"==typeof console.log&&"function"==typeof console.warn&&"function"==typeof console.error;function R(e,t){if(D&&M){for(var r,n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];(r=console)[e].apply(r,[t].concat(o))}}var J={deprecate:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];R.apply(void 0,["warn","Deprecation ("+e+"): "+t].concat(n))},error:function(e){if(M){for(var t,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=console).error.apply(t,[e].concat(n))}},warn:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];R.apply(void 0,["warn","Warning: "+e].concat(r))}},I={BLOCK:"@@__SLATE_BLOCK__@@",CHANGE:"@@__SLATE_CHANGE__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",HISTORY:"@@__SLATE_HISTORY__@@",INLINE:"@@__SLATE_INLINE__@@",LEAF:"@@__SLATE_LEAF__@@",MARK:"@@__SLATE_MARK__@@",OPERATION:"@@__SLATE_OPERATION__@@",RANGE:"@@__SLATE_RANGE__@@",SCHEMA:"@@__SLATE_SCHEMA__@@",STACK:"@@__SLATE_STACK__@@",TEXT:"@@__SLATE_TEXT__@@",VALUE:"@@__SLATE_VALUE__@@"};function V(e,t){return!(!t||!t[I[e]])}var U=void 0,W=void 0;function H(){return W()}function $(e){W=e}function q(){U=0,W=function(){return""+U++}}q();var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ee=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},te=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},re=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ne=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},oe={data:new t.Map,isVoid:!1,key:void 0,nodes:new t.List,type:void 0},ae=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"toJS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,isVoid:this.isVoid,data:this.data.toJS(),nodes:this.nodes.toArray().map(function(t){return t.toJS(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"object",get:function(){return"block"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"isEmpty",get:function(){return!this.isVoid&&!this.nodes.some(function(e){return!e.isEmpty})}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isBlock(e))return e;if("string"==typeof e&&(e={type:e}),f(e))return r.fromJS(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(r.isBlock(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.isVoid,i=void 0!==a&&a,s=e.key,u=void 0===s?H():s,c=e.nodes,l=void 0===c?[]:c,f=e.type;if("string"!=typeof f)throw new Error("`Block.fromJS` requires a `type` string.");return new r({key:u,type:f,isVoid:!!i,data:t.Map(o),nodes:r.createChildren(l)})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isBlockList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isBlock(e)})}}]),r}(t.Record(oe));function ie(){throw new Error("setTimeout has not been defined")}function se(){throw new Error("clearTimeout has not been defined")}ae.isBlock=V.bind(null,"BLOCK"),ae.prototype[I.BLOCK]=!0;var ue=ie,ce=se;function le(e){if(ue===setTimeout)return setTimeout(e,0);if((ue===ie||!ue)&&setTimeout)return ue=setTimeout,setTimeout(e,0);try{return ue(e,0)}catch(t){try{return ue.call(null,e,0)}catch(t){return ue.call(this,e,0)}}}"function"==typeof d.setTimeout&&(ue=setTimeout),"function"==typeof d.clearTimeout&&(ce=clearTimeout);var fe,de=[],ye=!1,he=-1;function ve(){ye&&fe&&(ye=!1,fe.length?de=fe.concat(de):he=-1,de.length&&pe())}function pe(){if(!ye){var e=le(ve);ye=!0;for(var t=de.length;t;){for(fe=de,de=[];++he<t;)fe&&fe[he].run();he=-1,t=de.length}fe=null,ye=!1,function(e){if(ce===clearTimeout)return clearTimeout(e);if((ce===se||!ce)&&clearTimeout)return ce=clearTimeout,clearTimeout(e);try{ce(e)}catch(t){try{return ce.call(null,e)}catch(t){return ce.call(this,e)}}}(e)}}function ge(e,t){this.fun=e,this.array=t}ge.prototype.run=function(){this.fun.apply(null,this.array)};function ke(){}var me=ke,be=ke,Ae=ke,Oe=ke,we=ke,xe=ke,Se=ke;var Be=d.performance||{},Fe=Be.now||Be.mozNow||Be.msNow||Be.oNow||Be.webkitNow||function(){return(new Date).getTime()};var Te=new Date;var Ke={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];de.push(new ge(e,t)),1!==de.length||ye||le(pe)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:me,addListener:be,once:Ae,off:Oe,removeListener:we,removeAllListeners:xe,emit:Se,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Fe.call(Be),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Te)/1e3}},je=1e3,_e=60*je,Ee=60*_e,Ce=24*Ee,Ne=365.25*Ce,ze=function(e,t){t=t||{};var r,n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Ne;case"days":case"day":case"d":return r*Ce;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ee;case"minutes":case"minute":case"mins":case"min":case"m":return r*_e;case"seconds":case"second":case"secs":case"sec":case"s":return r*je;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?Pe(r=e,Ce,"day")||Pe(r,Ee,"hour")||Pe(r,_e,"minute")||Pe(r,je,"second")||r+" ms":function(e){if(e>=Ce)return Math.round(e/Ce)+"d";if(e>=Ee)return Math.round(e/Ee)+"h";if(e>=_e)return Math.round(e/_e)+"m";if(e>=je)return Math.round(e/je)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Pe(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var Le=n(function(e,t){function r(e){var r;function o(){if(o.enabled){var e=o,n=+new Date,a=n-(r||n);e.diff=a,e.prev=r,e.curr=n,r=n;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var a=i[u];r=o.call(e,a),i.splice(u,1),u--}return r}),t.formatArgs.call(e,i),(o.log||t.log||console.log.bind(console)).apply(e,i)}}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),o.destroy=n,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var a=t.instances[r];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ze,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),De=(Le.coerce,Le.disable,Le.enable,Le.enabled,Le.humanize,Le.instances,Le.names,Le.skips,Le.formatters,n(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==Ke&&"env"in Ke&&(e=Ke.env.DEBUG),e}(t=e.exports=Le).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())})),Me=(De.log,De.formatArgs,De.save,De.load,De.useColors,De.storage,De.colors,Array.isArray),Re="object"==typeof r&&r&&r.Object===Object&&r,Je="object"==typeof self&&self&&self.Object===Object&&self,Ie=Re||Je||Function("return this")(),Ve=Ie.Symbol,Ue=Object.prototype,We=Ue.hasOwnProperty,He=Ue.toString,$e=Ve?Ve.toStringTag:void 0;var qe=function(e){var t=We.call(e,$e),r=e[$e];try{e[$e]=void 0;var n=!0}catch(e){}var o=He.call(e);return n&&(t?e[$e]=r:delete e[$e]),o},Ge=Object.prototype.toString;var Xe=function(e){return Ge.call(e)},Ye="[object Null]",Ze="[object Undefined]",Qe=Ve?Ve.toStringTag:void 0;var et=function(e){return null==e?void 0===e?Ze:Ye:Qe&&Qe in Object(e)?qe(e):Xe(e)};var tt=function(e){return null!=e&&"object"==typeof e},rt="[object Symbol]";var nt=function(e){return"symbol"==typeof e||tt(e)&&et(e)==rt},ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/;var it=function(e,t){if(Me(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!nt(e))||at.test(e)||!ot.test(e)||null!=t&&e in Object(t)};var st=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},ut="[object AsyncFunction]",ct="[object Function]",lt="[object GeneratorFunction]",ft="[object Proxy]";var dt,yt=function(e){if(!st(e))return!1;var t=et(e);return t==ct||t==lt||t==ut||t==ft},ht=Ie["__core-js_shared__"],vt=(dt=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||""))?"Symbol(src)_1."+dt:"";var pt=function(e){return!!vt&&vt in e},gt=Function.prototype.toString;var kt=function(e){if(null!=e){try{return gt.call(e)}catch(e){}try{return e+""}catch(e){}}return""},mt=/^\[object .+?Constructor\]$/,bt=Function.prototype,At=Object.prototype,Ot=bt.toString,wt=At.hasOwnProperty,xt=RegExp("^"+Ot.call(wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var St=function(e){return!(!st(e)||pt(e))&&(yt(e)?xt:mt).test(kt(e))};var Bt=function(e,t){return null==e?void 0:e[t]};var Ft=function(e,t){var r=Bt(e,t);return St(r)?r:void 0},Tt=Ft(Object,"create");var Kt=function(){this.__data__=Tt?Tt(null):{},this.size=0};var jt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_t="__lodash_hash_undefined__",Et=Object.prototype.hasOwnProperty;var Ct=function(e){var t=this.__data__;if(Tt){var r=t[e];return r===_t?void 0:r}return Et.call(t,e)?t[e]:void 0},Nt=Object.prototype.hasOwnProperty;var zt=function(e){var t=this.__data__;return Tt?void 0!==t[e]:Nt.call(t,e)},Pt="__lodash_hash_undefined__";var Lt=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tt&&void 0===t?Pt:t,this};function Dt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Dt.prototype.clear=Kt,Dt.prototype.delete=jt,Dt.prototype.get=Ct,Dt.prototype.has=zt,Dt.prototype.set=Lt;var Mt=Dt;var Rt=function(){this.__data__=[],this.size=0};var Jt=function(e,t){return e===t||e!=e&&t!=t};var It=function(e,t){for(var r=e.length;r--;)if(Jt(e[r][0],t))return r;return-1},Vt=Array.prototype.splice;var Ut=function(e){var t=this.__data__,r=It(t,e);return!(r<0||(r==t.length-1?t.pop():Vt.call(t,r,1),--this.size,0))};var Wt=function(e){var t=this.__data__,r=It(t,e);return r<0?void 0:t[r][1]};var Ht=function(e){return It(this.__data__,e)>-1};var $t=function(e,t){var r=this.__data__,n=It(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qt.prototype.clear=Rt,qt.prototype.delete=Ut,qt.prototype.get=Wt,qt.prototype.has=Ht,qt.prototype.set=$t;var Gt=qt,Xt=Ft(Ie,"Map");var Yt=function(){this.size=0,this.__data__={hash:new Mt,map:new(Xt||Gt),string:new Mt}};var Zt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Qt=function(e,t){var r=e.__data__;return Zt(t)?r["string"==typeof t?"string":"hash"]:r.map};var er=function(e){var t=Qt(this,e).delete(e);return this.size-=t?1:0,t};var tr=function(e){return Qt(this,e).get(e)};var rr=function(e){return Qt(this,e).has(e)};var nr=function(e,t){var r=Qt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function or(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}or.prototype.clear=Yt,or.prototype.delete=er,or.prototype.get=tr,or.prototype.has=rr,or.prototype.set=nr;var ar=or,ir="Expected a function";function sr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ir);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(sr.Cache||ar),r}sr.Cache=ar;var ur=sr,cr=500;var lr=/^\./,fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dr=/\\(\\)?/g,yr=function(e){var t=ur(e,function(e){return r.size===cr&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return lr.test(e)&&t.push(""),e.replace(fr,function(e,r,n,o){t.push(n?o.replace(dr,"$1"):r||e)}),t});var hr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},vr=1/0,pr=Ve?Ve.prototype:void 0,gr=pr?pr.toString:void 0;var kr=function e(t){if("string"==typeof t)return t;if(Me(t))return hr(t,e)+"";if(nt(t))return gr?gr.call(t):"";var r=t+"";return"0"==r&&1/t==-vr?"-0":r};var mr=function(e){return null==e?"":kr(e)};var br=function(e,t){return Me(e)?e:it(e,t)?[e]:yr(mr(e))},Ar=1/0;var Or=function(e){if("string"==typeof e||nt(e))return e;var t=e+"";return"0"==t&&1/e==-Ar?"-0":t};var wr=function(e,t){for(var r=0,n=(t=br(t,e)).length;null!=e&&r<n;)e=e[Or(t[r++])];return r&&r==n?e:void 0},xr=function(){try{var e=Ft(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Sr=function(e,t,r){"__proto__"==t&&xr?xr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Br=Object.prototype.hasOwnProperty;var Fr=function(e,t,r){var n=e[t];Br.call(e,t)&&Jt(n,r)&&(void 0!==r||t in e)||Sr(e,t,r)},Tr=9007199254740991,Kr=/^(?:0|[1-9]\d*)$/;var jr=function(e,t){return!!(t=null==t?Tr:t)&&("number"==typeof e||Kr.test(e))&&e>-1&&e%1==0&&e<t};var _r=function(e,t,r,n){if(!st(e))return e;for(var o=-1,a=(t=br(t,e)).length,i=a-1,s=e;null!=s&&++o<a;){var u=Or(t[o]),c=r;if(o!=i){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=st(l)?l:jr(t[o+1])?[]:{})}Fr(s,u,c),s=s[u]}return e};var Er=function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=wr(e,i);r(s,i)&&_r(a,br(i,e),s)}return a};var Cr=function(e,t){return null!=e&&t in Object(e)},Nr="[object Arguments]";var zr=function(e){return tt(e)&&et(e)==Nr},Pr=Object.prototype,Lr=Pr.hasOwnProperty,Dr=Pr.propertyIsEnumerable,Mr=zr(function(){return arguments}())?zr:function(e){return tt(e)&&Lr.call(e,"callee")&&!Dr.call(e,"callee")},Rr=9007199254740991;var Jr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Rr};var Ir=function(e,t,r){for(var n=-1,o=(t=br(t,e)).length,a=!1;++n<o;){var i=Or(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&Jr(o)&&jr(i,o)&&(Me(e)||Mr(e))};var Vr=function(e,t){return null!=e&&Ir(e,t,Cr)};var Ur=function(e,t){return Er(e,t,function(t,r){return Vr(e,r)})};var Wr=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Hr=Ve?Ve.isConcatSpreadable:void 0;var $r=function(e){return Me(e)||Mr(e)||!!(Hr&&e&&e[Hr])};var qr=function e(t,r,n,o,a){var i=-1,s=t.length;for(n||(n=$r),a||(a=[]);++i<s;){var u=t[i];r>0&&n(u)?r>1?e(u,r-1,n,o,a):Wr(a,u):o||(a[a.length]=u)}return a};var Gr=function(e){return null!=e&&e.length?qr(e,1):[]};var Xr=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Yr=Math.max;var Zr=function(e,t,r){return t=Yr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Yr(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Xr(e,this,s)}};var Qr=function(e){return function(){return e}};var en=function(e){return e},tn=xr?function(e,t){return xr(e,"toString",{configurable:!0,enumerable:!1,value:Qr(t),writable:!0})}:en,rn=800,nn=16,on=Date.now;var an=function(e){var t=0,r=0;return function(){var n=on(),o=nn-(n-r);if(r=n,o>0){if(++t>=rn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(tn);var sn=function(e){return an(Zr(e,void 0,Gr),e+"")},un=sn(function(e,t){return null==e?{}:Ur(e,t)}),cn={data:new t.Map,isVoid:!1,key:void 0,nodes:new t.List,type:void 0},ln=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"toJS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,isVoid:this.isVoid,data:this.data.toJS(),nodes:this.nodes.toArray().map(function(t){return t.toJS(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"object",get:function(){return"inline"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"isEmpty",get:function(){return!this.isVoid&&!this.nodes.some(function(e){return!e.isEmpty})}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isInline(e))return e;if("string"==typeof e&&(e={type:e}),f(e))return r.fromJS(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(r.isInline(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.isVoid,i=void 0!==a&&a,s=e.key,u=void 0===s?H():s,c=e.nodes,l=void 0===c?[]:c,f=e.type;if("string"!=typeof f)throw new Error("`Inline.fromJS` requires a `type` string.");return new r({key:u,type:f,isVoid:!!i,data:new t.Map(o),nodes:r.createChildren(l)})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isInlineList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isInline(e)})}}]),r}(t.Record(cn));ln.isInline=V.bind(null,"INLINE"),ln.prototype[I.INLINE]=!0;var fn=function(){function e(){X(this,e)}return Y(e,null,[{key:"create",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.Map.isMap(r))return r;if(f(r))return e.fromJS(r);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+r)}},{key:"fromJS",value:function(e){return new t.Map(e)}},{key:"fromJSON",value:function(t){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),e.fromJS(t)}}]),e}(),dn={data:new t.Map,type:void 0},yn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"toJS",value:function(){return{object:this.object,type:this.type,data:this.data.toJS()}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"mark"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isMark(e))return e;if("string"==typeof e&&(e={type:e}),f(e))return r.fromJS(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(t.Set.isSet(e)||Array.isArray(e))return new t.Set(e.map(r.create));if(null==e)return t.Set();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isMark(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if(f(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=fn.create(e.data)),t}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJS",value:function(e){var t=e.data,n=void 0===t?{}:t,o=e.type;if("string"!=typeof o)throw new Error("`Mark.fromJS` requires a `type` string.");return new r({type:o,data:fn.fromJS(n)})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isMarkSet",value:function(e){return t.Set.isSet(e)&&e.every(function(e){return r.isMark(e)})}}]),r}(t.Record(dn));yn.isMark=V.bind(null,"MARK"),yn.prototype[I.MARK]=!0,i(yn.prototype,["getComponent"]);var hn,vn,pn={};["deleteBackward","deleteCharBackward","deleteLineBackward","deleteWordBackward","deleteForward","deleteCharForward","deleteWordForward","deleteLineForward","setBlocks","setInlines","splitInline","unwrapBlock","unwrapInline","wrapBlock","wrapInline"].forEach(function(e){pn[e]=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=t.value.selection;t[e+"AtRange"].apply(t,[a].concat(n)),e.match(/Backward$/)?t.collapseToStart():e.match(/Forward$/)&&t.collapseToEnd()}}),pn.setBlock=function(){J.deprecate("slate@0.33.0","The `setBlock` method of Slate changes has been renamed to `setBlocks`."),pn.setBlocks.apply(pn,arguments)},pn.setInline=function(){J.deprecate("slate@0.33.0","The `setInline` method of Slate changes has been renamed to `setInlines`."),pn.setInlines.apply(pn,arguments)},pn.addMark=function(e,t){t=yn.create(t);var r=e.value,n=r.document,o=r.selection;if(o.isExpanded)e.addMarkAtRange(o,t);else if(o.marks){var a=o.marks.add(t),i=o.set("marks",a);e.select(i)}else{var s=n.getActiveMarksAtRange(o).add(t),u=o.set("marks",s);e.select(u)}},pn.addMarks=function(e,t){t.forEach(function(t){return e.addMark(t)})},pn.delete=function(e){var t=e.value.selection;e.deleteAtRange(t),e.collapseToStart()},pn.insertBlock=function(e,t){t=ae.create(t);var r=e.value.selection;e.insertBlockAtRange(r,t);var n=e.value.document.getNode(t.key);n&&e.collapseToEndOf(n)},pn.insertFragment=function(e,t){if(t.nodes.size){var r=e.value,n=r,o=n.document,a=n.selection,i=r,s=i.startText,u=i.endText,c=i.startInline,l=t.getLastText(),f=t.getClosestInline(l.key),d=t.nodes.first(),y=t.nodes.last(),h=o.getTexts().map(function(e){return e.key}),v=!c||a.hasEdgeAtStartOf(s)||a.hasEdgeAtEndOf(u),p=t.hasBlocks(d.key)||t.hasBlocks(y.key);e.insertFragmentAtRange(a,t);var g=(o=(r=e.value).document).getTexts().filter(function(e){return!h.includes(e.key)}),k=v?g.last():g.takeLast(2).first();k&&(f||p)?e.select(a.collapseToEndOf(k)):k?e.select(a.collapseToStartOf(k).move(l.text.length)):e.select(a.collapseToStart().move(l.text.length))}},pn.insertInline=function(e,t){t=ln.create(t);var r=e.value.selection;e.insertInlineAtRange(r,t);var n=e.value.document.getNode(t.key);n&&e.collapseToEndOf(n)},pn.insertText=function(e,t,r){var n=e.value,o=n.document,a=n.selection;r=r||a.marks||o.getInsertMarksAtRange(a),e.insertTextAtRange(a,t,r),a.marks&&o!=e.value.document&&e.select({marks:null})},pn.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.value,n=r.selection,o=r.document,a=n.marks||o.getInsertMarksAtRange(n);e.splitBlockAtRange(n,t).collapseToEnd(),a&&0!==a.size&&e.select({marks:a})},pn.removeMark=function(e,t){t=yn.create(t);var r=e.value,n=r.document,o=r.selection;if(o.isExpanded)e.removeMarkAtRange(o,t);else if(o.marks){var a=o.marks.remove(t),i=o.set("marks",a);e.select(i)}else{var s=n.getActiveMarksAtRange(o).remove(t),u=o.set("marks",s);e.select(u)}},pn.replaceMark=function(e,t,r){e.removeMark(t),e.addMark(r)},pn.toggleMark=function(e,t){t=yn.create(t),e.value.activeMarks.has(t)?e.removeMark(t):e.addMark(t)},pn.wrapText=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=e.value.selection;e.wrapTextAtRange(n,t,r),n.isCollapsed&&e.moveStart(0-t.length),e.moveEnd(0-r.length),n.isForward!=e.value.selection.isForward&&e.flip()},hn=new RegExp("^[^֑-߿יִ-﷽ﹰ-ﻼ]*[A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿]"),vn=new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]");var gn=function(e){return e=e.toString(),vn.test(e)?"rtl":hn.test(e)?"ltr":"neutral"},kn={data:new t.Map,key:void 0,nodes:new t.List},mn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"toJS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,data:this.data.toJS(),nodes:this.nodes.toArray().map(function(t){return t.toJS(e)})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"object",get:function(){return"document"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"isEmpty",get:function(){return!this.nodes.some(function(e){return!e.isEmpty})}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isDocument(e))return e;if((t.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),f(e))return r.fromJS(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(r.isDocument(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?H():a,s=e.nodes,u=void 0===s?[]:s;return new r({key:i,data:new t.Map(o),nodes:r.createChildren(u)})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}}]),r}(t.Record(kn));mn.isDocument=V.bind(null,"DOCUMENT"),mn.prototype[I.DOCUMENT]=!0;var bn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"hasAnchorAtStartOf",value:function(e){if(0!=this.anchorOffset)return!1;var t=An(e);return this.anchorKey==t.key}},{key:"hasAnchorAtEndOf",value:function(e){var t=On(e);return this.anchorKey==t.key&&this.anchorOffset==t.text.length}},{key:"hasAnchorBetween",value:function(e,t,r){return this.anchorOffset<=r&&t<=this.anchorOffset&&this.hasAnchorIn(e)}},{key:"hasAnchorIn",value:function(e){return"text"==e.object?e.key==this.anchorKey:null!=this.anchorKey&&e.hasDescendant(this.anchorKey)}},{key:"hasFocusAtEndOf",value:function(e){var t=On(e);return this.focusKey==t.key&&this.focusOffset==t.text.length}},{key:"hasFocusAtStartOf",value:function(e){if(0!=this.focusOffset)return!1;var t=An(e);return this.focusKey==t.key}},{key:"hasFocusBetween",value:function(e,t,r){return t<=this.focusOffset&&this.focusOffset<=r&&this.hasFocusIn(e)}},{key:"hasFocusIn",value:function(e){return"text"==e.object?e.key==this.focusKey:null!=this.focusKey&&e.hasDescendant(this.focusKey)}},{key:"isAtStartOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}},{key:"isAtEndOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}},{key:"focus",value:function(){return this.merge({isFocused:!0})}},{key:"blur",value:function(){return this.merge({isFocused:!1})}},{key:"deselect",value:function(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})}},{key:"flip",value:function(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:null==this.isBackward?null:!this.isBackward})}},{key:"moveAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,r=this.focusKey,n=this.focusOffset,o=this.isBackward,a=this.anchorOffset+e;return this.merge({anchorOffset:a,isBackward:t==r?a>n:o})}},{key:"moveFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,r=this.anchorOffset,n=this.focusKey,o=this.isBackward,a=this.focusOffset+e;return this.merge({focusOffset:a,isBackward:n==t?r>a:o})}},{key:"moveAnchorTo",value:function(e,t){var r=this.anchorKey,n=this.focusKey,o=this.focusOffset,a=this.isBackward;return this.merge({anchorKey:e,anchorOffset:t,isBackward:e==n?t>o:e==r?a:null})}},{key:"moveFocusTo",value:function(e,t){var r=this.focusKey,n=this.anchorKey,o=this.anchorOffset,a=this.isBackward;return this.merge({focusKey:e,focusOffset:t,isBackward:e==n?o>t:e==r?a:null})}},{key:"moveAnchorOffsetTo",value:function(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey==this.focusKey?e>this.focusOffset:this.isBackward})}},{key:"moveFocusOffsetTo",value:function(e){return this.merge({focusOffset:e,isBackward:this.anchorKey==this.focusKey?this.anchorOffset>e:this.isBackward})}},{key:"moveOffsetsTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(t)}},{key:"moveToAnchor",value:function(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}},{key:"moveToFocus",value:function(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}},{key:"moveAnchorToStartOf",value:function(e){return e=An(e),this.moveAnchorTo(e.key,0)}},{key:"moveAnchorToEndOf",value:function(e){return e=On(e),this.moveAnchorTo(e.key,e.text.length)}},{key:"moveFocusToStartOf",value:function(e){return e=An(e),this.moveFocusTo(e.key,0)}},{key:"moveFocusToEndOf",value:function(e){return e=On(e),this.moveFocusTo(e.key,e.text.length)}},{key:"moveToRangeOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return(this.isBackward?this.flip():this).moveAnchorToStartOf(e).moveFocusToEndOf(t)}},{key:"normalize",value:function(e){var t=this.anchorKey,r=this.anchorOffset,n=this.focusKey,o=this.focusOffset,a=this.isBackward,i=void 0===r?"undefined":G(r),s=void 0===o?"undefined":G(o);if("number"==i&&"number"==s||J.warn('The range offsets should be numbers, but they were of type "'+i+'" and "'+s+'".'),null==t||null==n)return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});var u=e.getDescendant(t),c=e.getDescendant(n);if(!u||!c){J.warn("The range was invalid and was reset. The range in question was:",this);var l=e.getFirstText();return this.merge({anchorKey:l?l.key:null,anchorOffset:0,focusKey:l?l.key:null,focusOffset:0,isBackward:!1})}if("text"!=u.object){J.warn("The range anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",u);var f=u.getTextAtOffset(r);r-=u.getOffset(f.key),u=f}if("text"!=c.object){J.warn("The range focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",c);var d=c.getTextAtOffset(o);o-=c.getOffset(d.key),c=d}return null==a&&(a=u.key===c.key?r>o:!e.areDescendantsSorted(u.key,c.key)),this.merge({anchorKey:u.key,anchorOffset:r,focusKey:c.key,focusOffset:o,isBackward:a})}},{key:"toJS",value:function(){return{object:this.object,anchorKey:this.anchorKey,anchorOffset:this.anchorOffset,focusKey:this.focusKey,focusOffset:this.focusOffset,isBackward:this.isBackward,isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map(function(e){return e.toJS()}),isAtomic:this.isAtomic}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"range"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"isBlurred",get:function(){return!this.isFocused}},{key:"isCollapsed",get:function(){return this.anchorKey==this.focusKey&&this.anchorOffset==this.focusOffset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isForward",get:function(){return null==this.isBackward?null:!this.isBackward}},{key:"isSet",get:function(){return null!=this.anchorKey&&null!=this.focusKey}},{key:"isUnset",get:function(){return!this.isSet}},{key:"startKey",get:function(){return this.isBackward?this.focusKey:this.anchorKey}},{key:"startOffset",get:function(){return this.isBackward?this.focusOffset:this.anchorOffset}},{key:"endKey",get:function(){return this.isBackward?this.anchorKey:this.focusKey}},{key:"endOffset",get:function(){return this.isBackward?this.anchorOffset:this.focusOffset}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isRange(e))return e;if(f(e))return r.fromJS(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isRange(e))return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused,marks:e.marks,isAtomic:e.isAtomic};if(f(e)){var t={};return"anchorKey"in e&&(t.anchorKey=e.anchorKey),"anchorOffset"in e&&(t.anchorOffset=e.anchorOffset),"anchorPath"in e&&(t.anchorPath=e.anchorPath),"focusKey"in e&&(t.focusKey=e.focusKey),"focusOffset"in e&&(t.focusOffset=e.focusOffset),"focusPath"in e&&(t.focusPath=e.focusPath),"isBackward"in e&&(t.isBackward=e.isBackward),"isFocused"in e&&(t.isFocused=e.isFocused),"marks"in e&&(t.marks=null==e.marks?null:yn.createSet(e.marks)),"isAtomic"in e&&(t.isAtomic=e.isAtomic),t}throw new Error("`Range.createProperties` only accepts objects or ranges, but you passed it: "+e)}},{key:"fromJS",value:function(e){var t=e.anchorKey,n=void 0===t?null:t,o=e.anchorOffset,a=void 0===o?0:o,i=e.focusKey,s=void 0===i?null:i,u=e.focusOffset,c=void 0===u?0:u,l=e.isBackward,f=void 0===l?null:l,d=e.isFocused,y=void 0!==d&&d,h=e.marks,v=void 0===h?null:h,p=e.isAtomic,g=void 0!==p&&p;return new r({anchorKey:n,anchorOffset:a,focusKey:s,focusOffset:c,isBackward:f,isFocused:y,marks:null==v?null:yn.createSet(v),isAtomic:g})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isRange",value:function(e){return!(!e||!e[I.RANGE])}}]),r}(t.Record({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null,isAtomic:!1}));bn.prototype[I.RANGE]=!0;[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]].forEach(function(e){var t=re(e,2),r=t[0],n=t[1];bn.prototype[""+r+n]=function(){var e;return(e=this[r+"Anchor"+n].apply(this,arguments))[r+"Focus"+n].apply(e,arguments)}});[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]].forEach(function(e){var t=re(e,3),r=t[0],n=t[1],o=t[2],a=r+"Anchor"+n,i=r+"Focus"+n;bn.prototype[r+"Start"+n]=function(){return this.isBackward?this[i].apply(this,arguments):this[a].apply(this,arguments)},bn.prototype[r+"End"+n]=function(){return this.isBackward?this[a].apply(this,arguments):this[i].apply(this,arguments)},o&&(bn.prototype[r+"Edge"+n]=function(){return this[a].apply(this,arguments)||this[i].apply(this,arguments)})});function An(e){return"text"==e.object?e:e.getFirstText()}function On(e){return"text"==e.object?e:e.getLastText()}[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]].forEach(function(e){var t=re(e,2),r=t[0],n=t[1];bn.prototype[r]=function(){return this[n].apply(this,arguments)}});var wn={marks:new t.Set,text:""},xn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"toJS",value:function(){return{object:this.object,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJS()})}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"character"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isCharacter(e))return e;if("string"==typeof e&&(e={text:e}),f(e))return r.fromJS(e);throw new Error("`Character.create` only accepts objects, strings or characters, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("string"==typeof e&&(e=e.split("")),t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Block.createList` only accepts strings, arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){var n=e.text,o=e.marks,a=void 0===o?[]:o;if("string"!=typeof n)throw new Error("`Character.fromJS` requires a block `text` string.");return new r({text:n,marks:new t.Set(a)})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isCharacterList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isCharacter(e)})}}]),r}(t.Record(wn));xn.isCharacter=V.bind(null,"CHARACTER"),xn.prototype[I.CHARACTER]=!0;var Sn={marks:t.Set(),text:""},Bn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"getCharacters",value:function(){J.deprecate("slate@0.34.0","The `characters` property of Slate objects is deprecated");var e=this.marks;return xn.createList(this.text.split("").map(function(t){return xn.create({text:t,marks:e})}))}},{key:"updateMark",value:function(e,t){var r=this.marks;if(t.equals(e))return this;if(!r.has(e))return this;var n=r.withMutations(function(r){r.remove(e).add(t)});return this.set("marks",n)}},{key:"addMarks",value:function(e){var t=this.marks;return this.set("marks",t.union(e))}},{key:"removeMark",value:function(e){var t=this.marks;return this.set("marks",t.remove(e))}},{key:"toJS",value:function(){return{object:this.object,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJS()})}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"leaf"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isLeaf(e))return e;if("string"==typeof e&&(e={text:e}),f(e))return r.fromJS(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createLeaves",value:function(e){if(e.size<=1)return e;var r=!1,n=t.List().withMutations(function(t){e.findLast(function(e,n){var o=t.first();if(o){if(o.marks.equals(e.marks))return r=!0,void t.set(0,o.set("text",""+e.text+o.text));if(""===o.text)return r=!0,void t.set(0,e);if(""===e.text)return void(r=!0)}t.unshift(e)})});return r?n:e}},{key:"splitLeaves",value:function(e,r){if(r<0)return[t.List(),e];if(0===e.size)return[t.List(),t.List()];var n=0,o=-1,a=void 0,i=void 0;return e.find(function(e){o++;var t=n,s=e.text;if((n+=s.length)<r)return!1;if(t>r)return!1;var u=r-t;return a=e.set("text",s.slice(0,u)),i=e.set("text",s.slice(u)),!0}),a?""===a.text?0===o?[t.List.of(a),e]:[e.take(o),e.skip(o)]:""===i.text?o===e.size-1?[e,t.List.of(i)]:[e.take(o+1),e.skip(o+1)]:[e.take(o).push(a),e.skip(o+1).unshift(i)]:[e,t.List()]}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){var n=e.text,o=void 0===n?"":n,a=e.marks,i=void 0===a?[]:a;return new r({text:o,marks:t.Set(i.map(yn.fromJS))})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isLeafList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isLeaf(e)})}}]),r}(t.Record(Sn));Bn.isLeaf=V.bind(null,"LEAF"),Bn.prototype[I.LEAF]=!0;var Fn={leaves:t.List(),key:void 0},Tn=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"getString",value:function(){return this.leaves.reduce(function(e,t){return e+t.text},"")}},{key:"searchLeafAtOffset",value:function(e){var t=0,r=0,n=-1;return{leaf:this.leaves.find(function(o){return n++,(t=(r=t)+o.text.length)>=e}),endOffset:t,index:n,startOffset:r}}},{key:"addMark",value:function(e,r,n){var o=t.Set.of(n);return this.addMarks(e,r,o)}},{key:"addMarks",value:function(e,r,n){if(""===this.text&&0===r&&0===e){var o=this.leaves.first();if(!o)return this.set("leaves",t.List.of(Bn.fromJS({text:"",marks:n})));var a=o.addMarks(n);return a===o?this:this.set("leaves",t.List.of(a))}if(""===this.text)return this;if(0===r)return this;if(e>=this.text.length)return this;var i=Bn.splitLeaves(this.leaves,e),s=re(i,2),u=s[0],c=s[1],l=Bn.splitLeaves(c,r),f=re(l,2),d=f[0],y=f[1],h=u.concat(d.map(function(e){return e.addMarks(n)}),y);return this.setLeaves(h)}},{key:"getDecorations",value:function(e){return e.__getDecorations(this)}},{key:"getLeaves",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.leaves;if(0===n.size)return t.List.of(Bn.create({}));if(!r||0===r.length)return n;if(0===this.text.length)return n;var o=this.key;return r.forEach(function(t){var r=t.startKey,a=t.endKey,i=t.startOffset,s=t.endOffset,u=t.marks,c=r==o,l=a==o;if(c&&l){var f=c?i:0,d=l?s-f:e.text.length-f;if(d<1)return;if(f>=e.text.length)return;if(0!==f||d<e.text.length){var y=Bn.splitLeaves(n,f),h=re(y,2),v=h[0],p=h[1],g=Bn.splitLeaves(p,d),k=re(g,2),m=k[0],b=k[1];return void(n=v.concat(m.map(function(e){return e.addMarks(u)}),b))}}n=n.map(function(e){return e.addMarks(u)})}),n===this.leaves?n:Bn.createLeaves(n)}},{key:"getActiveMarksBetweenOffsets",value:function(e,r){if(e<=0&&r>=this.text.length)return this.getActiveMarks();if(e>=r)return t.Set();if(""===this.text)return this.getActiveMarks();var n=null,o=0;return this.leaves.forEach(function(t){var a=o;if(!((o=a+t.text.length)<=e)){if(a>=r)return!1;if(n)return(n=n.intersect(t.marks))&&n.size,!1;n=t.marks}}),n||t.Set()}},{key:"getActiveMarks",value:function(){var e=this;if(0===this.leaves.size)return t.Set();var r=this.leaves.first().marks;return 0===r.size?r:r.withMutations(function(t){e.leaves.forEach(function(e){if(t.intersect(e.marks),0===t.size)return!1})})}},{key:"getMarksBetweenOffsets",value:function(e,r){if(e<=0&&r>=this.text.length)return this.getMarks();if(e>=r)return t.Set();if(""===this.text)return this.getActiveMarks();var n=null,o=0;return this.leaves.forEach(function(t){var a=o;if(!((o=a+t.text.length)<=e))return!(a>=r)&&void(n=n?n.union(t.marks):t.marks)}),n||t.Set()}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new t.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){if(0===this.leaves.size)return[];var e=this.leaves.first().marks;if(1===this.leaves.size)return e.toArray();var t=[];return this.leaves.forEach(function(e){t.push(e.marks.toArray())}),Array.prototype.concat.apply(e.toArray(),t)}},{key:"getMarksAtIndex",value:function(e){var r=this.searchLeafAtOffset(e).leaf;return r?r.marks:t.Set()}},{key:"getNode",value:function(e){return this.key==e?this:null}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"insertText",value:function(e,r,n){if(""===this.text)return this.set("leaves",t.List.of(Bn.create({text:r,marks:n})));if(0===r.length)return this;n||(n=t.Set());var o=this.searchLeafAtOffset(e),a=o.startOffset,i=o.leaf,s=o.index,u=e-a,c=i.text.slice(0,u),l=i.text.slice(u),f=this.leaves;if(i.marks.equals(n))return this.set("leaves",f.set(s,i.set("text",c+r+l)));var d=f.splice(s,1,i.set("text",c),Bn.create({text:r,marks:n}),i.set("text",l));return this.setLeaves(d)}},{key:"regenerateKey",value:function(){var e=H();return this.set("key",e)}},{key:"removeMark",value:function(e,r,n){if(""===this.text&&0===e&&0===r){var o=this.leaves.first();if(!o)return this;var a=o.removeMark(n);return a===o?this:this.set("leaves",t.List.of(a))}if(r<=0)return this;if(e>=this.text.length)return this;var i=Bn.splitLeaves(this.leaves,e),s=re(i,2),u=s[0],c=s[1],l=Bn.splitLeaves(c,r),f=re(l,2),d=f[0],y=f[1],h=u.concat(d.map(function(e){return e.removeMark(n)}),y);return this.setLeaves(h)}},{key:"removeText",value:function(e,r){if(r<=0)return this;if(e>=this.text.length)return this;if(1===r){var n=this.searchLeafAtOffset(e+1),o=n.leaf,a=n.index,i=e-n.startOffset;if(o){if(1===o.text.length){var s=this.leaves.remove(a);return this.setLeaves(s)}var u=o.text.slice(0,i)+o.text.slice(i+r);if(u.length>0)return this.set("leaves",this.leaves.set(a,o.set("text",u)))}}var c=Bn.splitLeaves(this.leaves,e),l=re(c,2),f=l[0],d=l[1],y=Bn.splitLeaves(d,r)[1],h=Bn.createLeaves(f.concat(y));if(1===h.size){var v=h.first();if(""===v.text)return this.set("leaves",t.List.of(v.set("marks",this.getActiveMarks())))}return this.set("leaves",h)}},{key:"toJS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,leaves:this.getLeaves().toArray().map(function(e){return e.toJS()})};return e.preserveKeys&&(t.key=this.key),t}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"updateMark",value:function(e,r,n,o){var a=n.merge(o);if(""===this.text&&0===r&&0===e){var i=this.leaves.first();if(!i)return this;var s=i.updateMark(n,a);return s===i?this:this.set("leaves",t.List.of(s))}if(r<=0)return this;if(e>=this.text.length)return this;var u=Bn.splitLeaves(this.leaves,e),c=re(u,2),l=c[0],f=c[1],d=Bn.splitLeaves(f,r),y=re(d,2),h=y[0],v=y[1],p=l.concat(h.map(function(e){return e.updateMark(n,a)}),v);return this.setLeaves(p)}},{key:"splitText",value:function(e){var t=Bn.splitLeaves(this.leaves,e);return[this.set("leaves",t[0]),this.set("leaves",t[1]).regenerateKey()]}},{key:"mergeText",value:function(e){var t=this.leaves.concat(e.leaves);return this.setLeaves(t)}},{key:"validate",value:function(e){return e.validateNode(this)}},{key:"getFirstInvalidDescendant",value:function(e){return this.validate(e)?this:null}},{key:"setLeaves",value:function(e){var r=Bn.createLeaves(e);if(1===r.size){var n=r.first();if((!n.marks||0===n.marks.size)&&""===n.text)return this.set("leaves",t.List())}return this.set("leaves",Bn.createLeaves(e))}},{key:"object",get:function(){return"text"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"isEmpty",get:function(){return""==this.text}},{key:"text",get:function(){return this.getString()}},{key:"characters",get:function(){return this.leaves.flatMap(function(e){return e.getCharacters()})}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r.isText(e))return e;if("string"==typeof e&&(e={leaves:[{text:e}]}),f(e)){if(e.text){var t=e,n=t.text,o=t.marks;e={key:t.key,leaves:[{text:n,marks:o}]}}return r.fromJS(e)}throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(r.isText(e))return e;var n=e.key,o=void 0===n?H():n,a=e.leaves,i=void 0===a?t.List():a;if(Array.isArray(i))i=t.List(i.map(function(e){return Bn.create(e)}));else{if(!t.List.isList(i))throw new Error("leaves must be either Array or Immutable.List");i=i.map(function(e){return Bn.create(e)})}return new r({leaves:Bn.createLeaves(i),key:o})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isTextList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isText(e)})}}]),r}(t.Record(Fn));Tn.isText=V.bind(null,"TEXT"),Tn.prototype[I.TEXT]=!0,i(Tn.prototype,["getDecorations","getActiveMarks","getMarks","getMarksAsArray","validate","getString"]);var Kn=function(){function e(){X(this,e)}return Y(e,[{key:"areDescendantsSorted",value:function(e,t){e=jn(e),t=jn(t);var r=this.getKeysAsArray(),n=r.indexOf(e),o=r.indexOf(t);return-1==n||-1==o?null:n<o}},{key:"assertChild",value:function(e){var t=this.getChild(e);if(!t)throw e=jn(e),new Error('Could not find a child node with key "'+e+'".');return t}},{key:"assertDescendant",value:function(e){var t=this.getDescendant(e);if(!t)throw e=jn(e),new Error('Could not find a descendant node with key "'+e+'".');return t}},{key:"assertNode",value:function(e){var t=this.getNode(e);if(!t)throw e=jn(e),new Error('Could not find a node with key "'+e+'".');return t}},{key:"assertPath",value:function(e){var t=this.getDescendantAtPath(e);if(!t)throw new Error('Could not find a descendant at path "'+e+'".');return t}},{key:"filterDescendants",value:function(e){var r=[];return this.forEachDescendant(function(t,n,o){e(t,n,o)&&r.push(t)}),t.List(r)}},{key:"findDescendant",value:function(e){var t=null;return this.forEachDescendant(function(r,n,o){if(e(r,n,o))return t=r,!1}),t}},{key:"forEachDescendant",value:function(e){var t=void 0;return this.nodes.forEach(function(r,n,o){return!1===e(r,n,o)?(t=!1,!1):"text"!=r.object?t=r.forEachDescendant(e):void 0}),t}},{key:"getAncestors",value:function(e){if((e=jn(e))==this.key)return t.List();if(this.hasChild(e))return t.List([this]);var r=void 0;return this.nodes.find(function(t){return"text"!=t.object&&(r=t.getAncestors(e))}),r?r.unshift(this):null}},{key:"getBlocks",value:function(){var e=this.getBlocksAsArray();return new t.List(e)}},{key:"getBlocksAsArray",value:function(){return this.nodes.reduce(function(e,t){return"block"!=t.object?e:t.isLeafBlock()?(e.push(t),e):e.concat(t.getBlocksAsArray())},[])}},{key:"getBlocksAtRange",value:function(e){var r=this.getBlocksAtRangeAsArray(e);return new t.List(new t.OrderedSet(r))}},{key:"getBlocksAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,r=t.startKey,n=t.endKey,o=this.getClosestBlock(r);if(r==n)return[o];var a=this.getClosestBlock(n),i=this.getBlocksAsArray(),s=i.indexOf(o),u=i.indexOf(a);return i.slice(s,u+1)}},{key:"getBlocksByType",value:function(e){var r=this.getBlocksByTypeAsArray(e);return new t.List(r)}},{key:"getBlocksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,r){return"block"!=r.object?t:r.isLeafBlock()&&r.type==e?(t.push(r),t):t.concat(r.getBlocksByTypeAsArray(e))},[])}},{key:"getCharacters",value:function(){return this.getTexts().flatMap(function(e){return e.characters})}},{key:"getCharactersAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return t.List();var r=e,n=r.startKey,o=r.endKey,a=r.startOffset,i=r.endOffset;return n===o?this.getDescendant(o).characters.slice(a,i):this.getTextsAtRange(e).flatMap(function(e){return e.key===n?e.characters.slice(a):e.key===o?e.characters.slice(0,i):e.characters})}},{key:"getChild",value:function(e){return e=jn(e),this.nodes.find(function(t){return t.key==e})}},{key:"getClosest",value:function(e,t){e=jn(e);var r=this.getAncestors(e);if(!r)throw new Error('Could not find a descendant node with key "'+e+'".');return r.rest().findLast(t)}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,function(e){return"block"==e.object})}},{key:"getClosestInline",value:function(e){return this.getClosest(e,function(e){return"inline"==e.object})}},{key:"getClosestVoid",value:function(e){return this.getClosest(e,function(e){return e.isVoid})}},{key:"getCommonAncestor",value:function(e,r){if(e=jn(e),r=jn(r),e==this.key)return this;if(r==this.key)return this;this.assertDescendant(e),this.assertDescendant(r);for(var n=new t.List,o=this.getParent(e),a=this.getParent(r);o;)n=n.push(o),o=this.getParent(o.key);for(;a;){if(n.includes(a))return a;a=this.getParent(a.key)}}},{key:"getDecorations",value:function(e){var t=e.find("decorateNode",this);return bn.createList(t||[])}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.assertDescendant(e),this.hasChild(e)?t:this.getFurthestAncestor(e).getDepth(e,t+1)}},{key:"getDescendant",value:function(e){e=jn(e);var t=null,r=this.nodes.find(function(r){return r.key===e?r:"text"!==r.object&&(t=r.getDescendant(e))});return t||r}},{key:"getDescendantAtPath",value:function(e){var t=this,r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;if(!t)return;if(!t.nodes)return;t=t.nodes.get(s)}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}return t}},{key:"getFirstText",value:function(){var e=null,t=this.nodes.find(function(t){return"text"==t.object||(e=t.getFirstText())});return e||t}},{key:"getFragmentAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return mn.create();for(var t=this,r=e,n=r.startKey,o=r.startOffset,a=r.endKey,i=r.endOffset,s=t.assertDescendant(n),u=t.assertDescendant(a),c=s,l=void 0,f=void 0;f=t.getParent(c.key);){var d=f.nodes.indexOf(c),y="text"==c.object?o:c.nodes.indexOf(l);f=f.splitNode(d,y),t=t.updateNode(f),l=f.nodes.get(d+1),c=f}for(c=n==a?t.getNextText(n):u;f=t.getParent(c.key);){var h=f.nodes.indexOf(c),v="text"==c.object?n==a?i-o:i:c.nodes.indexOf(l);f=f.splitNode(h,v),t=t.updateNode(f),l=f.nodes.get(h+1),c=f}var p=t.getNextSibling(t.getFurthestAncestor(n).key),g=n==a?t.getNextSibling(t.getNextSibling(t.getFurthestAncestor(a).key).key):t.getNextSibling(t.getFurthestAncestor(a).key),k=t.nodes.indexOf(p),m=t.nodes.indexOf(g),b=t.nodes.slice(k,m);return mn.create({nodes:b})}},{key:"getFurthest",value:function(e,t){var r=this.getAncestors(e);if(!r)throw e=jn(e),new Error('Could not find a descendant node with key "'+e+'".');return r.rest().find(t)}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,function(e){return"block"==e.object})}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,function(e){return"inline"==e.object})}},{key:"getFurthestAncestor",value:function(e){return e=jn(e),this.nodes.find(function(t){return t.key==e||"text"!=t.object&&t.hasDescendant(e)})}},{key:"getFurthestOnlyChildAncestor",value:function(e){var t=this.getAncestors(e);if(!t)throw e=jn(e),new Error('Could not find a descendant node with key "'+e+'".');var r=t.shift().reverse().takeUntil(function(e){return e.nodes.size>1}).last();return r||null}},{key:"getInlines",value:function(){var e=this.getInlinesAsArray();return new t.List(e)}},{key:"getInlinesAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"!=t.object&&(t.isLeafInline()?e.push(t):e=e.concat(t.getInlinesAsArray()))}),e}},{key:"getInlinesAtRange",value:function(e){var r=this.getInlinesAtRangeAsArray(e);return new t.List(new t.OrderedSet(r))}},{key:"getInlinesAtRangeAsArray",value:function(e){var t=this;return(e=e.normalize(this)).isUnset?[]:this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})}},{key:"getInlinesByType",value:function(e){var r=this.getInlinesByTypeAsArray(e);return new t.List(r)}},{key:"getInlinesByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,r){return"text"==r.object?t:r.isLeafInline()&&r.type==e?(t.push(r),t):t.concat(r.getInlinesByTypeAsArray(e))},[])}},{key:"getKeysAsArray",value:function(){var e=[];return this.forEachDescendant(function(t){e.push(t.key)}),e}},{key:"getKeys",value:function(){var e=this.getKeysAsArray();return new t.Set(e)}},{key:"getLastText",value:function(){var e=null,t=this.nodes.findLast(function(t){return"text"==t.object||(e=t.getLastText())});return e||t}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new t.Set(e)}},{key:"getOrderedMarks",value:function(){var e=this.getMarksAsArray();return new t.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){e.push(t.getMarksAsArray())}),Array.prototype.concat.apply([],e)}},{key:"getMarksAtRange",value:function(e){return new t.Set(this.getOrderedMarksAtRange(e))}},{key:"getInsertMarksAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return t.Set();if(e.isCollapsed)return this.getMarksAtPosition(e.startKey,e.startOffset);var r=e,n=r.startKey,o=r.startOffset;return this.getDescendant(n).getMarksAtIndex(o+1)}},{key:"getOrderedMarksAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return t.OrderedSet();if(e.isCollapsed)return this.getMarksAtPosition(e.startKey,e.startOffset);var r=e,n=r.startKey,o=r.startOffset,a=r.endKey,i=r.endOffset;return this.getOrderedMarksBetweenPositions(n,o,a,i)}},{key:"getOrderedMarksBetweenPositions",value:function(e,r,n,o){if(e===n)return this.getDescendant(e).getMarksBetweenOffsets(r,o);var a=this.getTextsBetweenPositionsAsArray(e,n);return t.OrderedSet().withMutations(function(t){a.forEach(function(a){a.key===e?t.union(a.getMarksBetweenOffsets(r,a.text.length)):a.key===n?t.union(a.getMarksBetweenOffsets(0,o)):t.union(a.getMarks())})})}},{key:"getActiveMarksAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return t.Set();if(e.isCollapsed){var r=e,n=r.startKey,o=r.startOffset;return this.getMarksAtPosition(n,o).toSet()}var a=e,i=a.startKey,s=a.endKey,u=a.startOffset,c=a.endOffset,l=this.getDescendant(i);if(i!==s){for(;i!==s&&0===c;){var f=this.getPreviousText(s);s=f.key,c=f.text.length}for(;i!==s&&u===l.text.length;)i=(l=this.getNextText(i)).key,u=0}if(i===s)return l.getActiveMarksBetweenOffsets(u,c);var d=l.getActiveMarksBetweenOffsets(u,l.text.length);if(0===d.size)return t.Set();var y=this.getDescendant(s).getActiveMarksBetweenOffsets(0,c),h=d.intersect(y);if(0===h.size)return h;for(var v=this.getNextText(i);v.key!==s;){if(0!==v.text.length&&0===(h=h.intersect(v.getActiveMarks())).size)return t.Set();v=this.getNextText(v.key)}return h}},{key:"getMarksAtPosition",value:function(e,r){var n=this.getDescendant(e).getMarksAtIndex(r);if(0!==r)return n;var o=this.getClosestBlock(e);if(""===o.text)return n;var a=this.getPreviousText(e);return a?o.hasDescendant(a.key)?a.getMarksAtIndex(a.text.length):n:t.Set()}},{key:"getMarksByType",value:function(e){var r=this.getMarksByTypeAsArray(e);return new t.Set(r)}},{key:"getOrderedMarksByType",value:function(e){var r=this.getMarksByTypeAsArray(e);return new t.OrderedSet(r)}},{key:"getMarksByTypeAsArray",value:function(e){return this.nodes.reduce(function(t,r){return"text"==r.object?t.concat(r.getMarksAsArray().filter(function(t){return t.type==e})):t.concat(r.getMarksByTypeAsArray(e))},[])}},{key:"getNextBlock",value:function(e){var t=this.assertDescendant(e),r=void 0;"block"==t.object?r=t.getLastText():r=this.getClosestBlock(e).getLastText();var n=this.getNextText(r.key);return n?this.getClosestBlock(n.key):null}},{key:"getNextSibling",value:function(e){e=jn(e);var t=this.getParent(e).nodes.skipUntil(function(t){return t.key==e});if(0==t.size)throw new Error('Could not find a child node with key "'+e+'".');return t.get(1)}},{key:"getNextText",value:function(e){return e=jn(e),this.getTexts().skipUntil(function(t){return t.key==e}).get(1)}},{key:"getNode",value:function(e){return e=jn(e),this.key==e?this:this.getDescendant(e)}},{key:"getNodeAtPath",value:function(e){return e.length?this.getDescendantAtPath(e):this}},{key:"getOffset",value:function(e){this.assertDescendant(e);var t=this.getFurthestAncestor(e),r=this.nodes.takeUntil(function(e){return e==t}).reduce(function(e,t){return e+t.text.length},0);return this.hasChild(e)?r:r+t.getOffset(e)}},{key:"getOffsetAtRange",value:function(e){if((e=e.normalize(this)).isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e,r=t.startKey,n=t.startOffset;return this.getOffset(r)+n}},{key:"getParent",value:function(e){if(this.hasChild(e))return this;var t=null;return this.nodes.find(function(r){return"text"!=r.object&&(t=r.getParent(e))}),t}},{key:"getPath",value:function(e){var t=this.assertNode(e),r=[];return this.getAncestors(e).reverse().forEach(function(e){var n=e.nodes.indexOf(t);r.unshift(n),t=e}),r}},{key:"refindPath",value:function(e,t){var r=this.getDescendantAtPath(e);return r&&r.key===t?e:this.getPath(t)}},{key:"refindNode",value:function(e,t){var r=this.getDescendantAtPath(e);return r&&r.key===t?r:this.getDescendant(t)}},{key:"getPlaceholder",value:function(e){return e.__getPlaceholder(this)}},{key:"getPreviousBlock",value:function(e){var t=this.assertDescendant(e),r=void 0;"block"==t.object?r=t.getFirstText():r=this.getClosestBlock(e).getFirstText();var n=this.getPreviousText(r.key);return n?this.getClosestBlock(n.key):null}},{key:"getPreviousSibling",value:function(e){e=jn(e);var t=this.getParent(e),r=t.nodes.takeUntil(function(t){return t.key==e});if(r.size==t.nodes.size)throw new Error('Could not find a child node with key "'+e+'".');return r.last()}},{key:"getPreviousText",value:function(e){return e=jn(e),this.getTexts().takeUntil(function(t){return t.key==e}).last()}},{key:"getSelectionIndexes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.startKey,n=e.endKey;if(!t)return null;if(e.isUnset)return null;if(r==n){var o=this.getFurthestAncestor(r),a=o?this.nodes.indexOf(o):null;return{start:a,end:a+1}}var i=null,s=null;return this.nodes.forEach(function(e,t){return"text"==e.object?(null==i&&e.key==r&&(i=t),null==s&&e.key==n&&(s=t+1)):(null==i&&e.hasDescendant(r)&&(i=t),null==s&&e.hasDescendant(n)&&(s=t+1)),null==i||null==s}),t&&null==i&&(i=0),t&&null==s&&(s=this.nodes.size),null==i?null:{start:i,end:s}}},{key:"getText",value:function(){return this.nodes.reduce(function(e,t){return e+t.text},"")}},{key:"getTextAtOffset",value:function(e){if(0==e)return this.getFirstText();if(e==this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0;return this.getTexts().find(function(r,n,o){return(t+=r.text.length)>e})}},{key:"getTextDirection",value:function(){var e=gn(this.text);return"neutral"==e?void 0:e}},{key:"getTexts",value:function(){var e=this.getTextsAsArray();return new t.List(e)}},{key:"getTextsAsArray",value:function(){var e=[];return this.nodes.forEach(function(t){"text"==t.object?e.push(t):e=e.concat(t.getTextsAsArray())}),e}},{key:"getTextsAtRange",value:function(e){if((e=e.normalize(this)).isUnset)return t.List();var r=e,n=r.startKey,o=r.endKey;return new t.List(this.getTextsBetweenPositionsAsArray(n,o))}},{key:"getTextsBetweenPositionsAsArray",value:function(e,t){var r=this.getDescendant(e);if(e==t)return[r];var n=this.getDescendant(t),o=this.getTextsAsArray(),a=o.indexOf(r),i=o.indexOf(n,a);return o.slice(a,i+1)}},{key:"getTextsAtRangeAsArray",value:function(e){if((e=e.normalize(this)).isUnset)return[];var t=e,r=t.startKey,n=t.endKey;return this.getTextsBetweenPositionsAsArray(r,n)}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasBlocks",value:function(e){var t=this.assertNode(e);return!(!t.nodes||!t.nodes.find(function(e){return"block"===e.object}))}},{key:"hasInlines",value:function(e){var t=this.assertNode(e);return!(!t.nodes||!t.nodes.find(function(e){return ln.isInline(e)||Tn.isText(e)}))}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"hasVoidParent",value:function(e){return!!this.getClosestVoid(e)}},{key:"insertNode",value:function(e,t){var r=this.getKeysAsArray();r.includes(t.key)&&(t=t.regenerateKey()),"text"!=t.object&&(t=t.mapDescendants(function(e){return r.includes(e.key)?e.regenerateKey():e}));var n=this.nodes.insert(e,t);return this.set("nodes",n)}},{key:"isInRange",value:function(e){var t=this,r=e=e.normalize(this),n=r.startKey,o=r.endKey,a=r.isCollapsed;if(t.key==n||t.key==o||t.hasDescendant(n)||t.hasDescendant(o))return!0;if(a)return!1;var i=!1;return t.getTextsAtRange(e).forEach(function(e){return t.hasDescendant(e.key)&&(i=!0),i}),i}},{key:"isLeafBlock",value:function(){return"block"==this.object&&this.nodes.every(function(e){return"block"!=e.object})}},{key:"isLeafInline",value:function(){return"inline"==this.object&&this.nodes.every(function(e){return"inline"!=e.object})}},{key:"mergeNode",value:function(e,t){var r=this,n=r.nodes.get(e),o=r.nodes.get(t);if(n.object!=o.object)throw new Error('Tried to merge two nodes of different objects: "'+n.object+'" and "'+o.object+'".');if("text"==n.object)n=n.mergeText(o);else{var a=n.nodes.concat(o.nodes);n=n.set("nodes",a)}return r=(r=(r=r.removeNode(t)).removeNode(e)).insertNode(e,n)}},{key:"mapChildren",value:function(e){var t=this,r=this.nodes;return r.forEach(function(n,o){var a=e(n,o,t.nodes);a!=n&&(r=r.set(a.key,a))}),this.set("nodes",r)}},{key:"mapDescendants",value:function(e){var t=this,r=this.nodes;return r.forEach(function(n,o){var a=n;"text"!=a.object&&(a=a.mapDescendants(e)),(a=e(a,o,t.nodes))!=n&&(r=r.set(o,a))}),this.set("nodes",r)}},{key:"regenerateKey",value:function(){var e=H();return this.set("key",e)}},{key:"removeDescendant",value:function(e){e=jn(e);var t=this,r=t.getParent(e);if(!r)throw new Error('Could not find a descendant node with key "'+e+'".');var n=r.nodes.findIndex(function(t){return t.key===e}),o=r.nodes.delete(n);return r=r.set("nodes",o),t=t.updateNode(r)}},{key:"removeNode",value:function(e){var t=this.nodes.delete(e);return this.set("nodes",t)}},{key:"splitNode",value:function(e,t){var r=this,n=r.nodes.get(e),o=void 0,a=void 0;if("text"==n.object){var i=n.splitText(t),s=re(i,2);o=s[0],a=s[1]}else{var u=n.nodes.take(t),c=n.nodes.skip(t);o=n.set("nodes",u),a=n.set("nodes",c).regenerateKey()}return r=(r=(r=r.removeNode(e)).insertNode(e,a)).insertNode(e,o)}},{key:"updateNode",value:function(e){if(e.key==this.key)return e;var t=this.assertDescendant(e.key);return this.getAncestors(e.key).reverse().forEach(function(r){var n=r.nodes,o=n.indexOf(t);t=r,n=n.set(o,e),r=r.set("nodes",n),e=r}),e}},{key:"validate",value:function(e){return e.validateNode(this)}},{key:"getFirstInvalidDescendant",value:function(e){var t=null;return this.nodes.find(function(r){return t=r.validate(e)?r:r.getFirstInvalidDescendant(e)}),t}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if(f(t)){var r=t.object;switch(!r&&t.kind&&(J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),r=t.kind),r){case"block":return ae.create(t);case"document":return mn.create(t);case"inline":return ln.create(t);case"text":return Tn.create(t);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(r)||Array.isArray(r))return t.List(r.map(e.create));throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+r)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ae.isBlock(e)||ln.isInline(e))return{data:e.data,isVoid:e.isVoid,type:e.type};if("string"==typeof e)return{type:e};if(f(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=fn.create(e.data)),"isVoid"in e&&(t.isVoid=e.isVoid),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var t=e.object;switch(!t&&e.kind&&(J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),t=e.kind),t){case"block":return ae.fromJS(e);case"document":return mn.fromJS(e);case"inline":return ln.fromJS(e);case"text":return Tn.fromJS(e);default:throw new Error("`Node.fromJS` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+e)}}},{key:"isNode",value:function(e){return!!["BLOCK","DOCUMENT","INLINE","TEXT"].find(function(t){return V(t,e)})}},{key:"isNodeList",value:function(r){return t.List.isList(r)&&r.every(function(t){return e.isNode(t)})}}]),e}();function jn(e){if("string"==typeof e)return e;throw new Error("Invalid `key` argument! It must be a key string, but you passed: "+e)}Kn.fromJS=Kn.fromJSON,i(Kn.prototype,["areDescendantsSorted","getAncestors","getBlocksAsArray","getBlocksAtRangeAsArray","getBlocksByTypeAsArray","getChild","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getDecorations","getDepth","getDescendant","getDescendantAtPath","getFirstText","getFragmentAtRange","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAsArray","getInlinesAtRangeAsArray","getInlinesByTypeAsArray","getMarksAsArray","getMarksAtPosition","getOrderedMarksBetweenPositions","getInsertMarksAtRange","getKeysAsArray","getLastText","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getNodeAtPath","getOffset","getOffsetAtRange","getParent","getPath","getPlaceholder","getPreviousBlock","getPreviousSibling","getPreviousText","getText","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPositionsAsArray","isLeafBlock","isLeafInline","validate","getFirstInvalidDescendant"]),Object.getOwnPropertyNames(Kn.prototype).forEach(function(e){"constructor"!=e&&(ae.prototype[e]=Kn.prototype[e],ln.prototype[e]=Kn.prototype[e],mn.prototype[e]=Kn.prototype[e])}),ae.createChildren=Kn.createList,ln.createChildren=Kn.createList,mn.createChildren=Kn.createList;var _n=n(function(e,t){!function(n){var o=t,a=e&&e.exports==o&&e,i="object"==typeof r&&r;i.global!==i&&i.window!==i||(n=i);var s=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,u=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,c=function(e){for(var t="",r=(e=e.replace(s,function(e,t,r){return c(r)+t}).replace(u,"$2$1")).length;r--;)t+=e.charAt(r);return t},l={version:"0.2.0",reverse:c};if(o&&!o.nodeType)if(a)a.exports=l;else for(var f in l)l.hasOwnProperty(f)&&(o[f]=l[f]);else n.esrever=l}(r)}).reverse,En=55296,Cn=57343,Nn=/\s/,zn=/['\u2018\u2019]/,Pn=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Ln(e,t){if(Nn.test(e))return!1;if(zn.test(e)){var r=t.charAt(0),n=Dn(r);if(Ln(r=t.slice(0,n),t.slice(n)))return!0}return!Pn.test(e)}function Dn(e){return t=e.charCodeAt(0),En<=t&&t<=Cn?2:1;var t}function Mn(e){return Dn(e.charAt(0))}function Rn(e){for(var t=0,r=0,n=!1,o=void 0;o=e.charAt(r);){var a=Dn(o);if(Ln(o=e.slice(r,r+a),e.slice(r+a)))n=!0,t+=a;else{if(n)break;t+=a}r+=a}return t}var Jn={getCharOffsetForward:function(e,t){return Mn(e=e.slice(t))},getCharOffsetBackward:function(e,t){return e=e.slice(0,t),Mn(e=_n(e))},getWordOffsetBackward:function(e,t){return e=e.slice(0,t),Rn(e=_n(e))},getWordOffsetForward:function(e,t){return Rn(e=e.slice(t))}},In={addMarkAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var o=e.getFlag("normalize",n),a=e.value.document,i=t.startKey,s=t.startOffset,u=t.endKey,c=t.endOffset;a.getTextsAtRange(t).forEach(function(t){var n=t.key,a=0,l=t.text.length;n==i&&(a=s),n==u&&(l=c),n==i&&n==u&&(l=c-s),e.addMarkByKey(n,a,l,r,{normalize:o})})}},addMarksAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.forEach(function(r){return e.addMarkAtRange(t,r,n)})},deleteAtRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){e.snapshotSelection();var n=e.getFlag("normalize",r),o=e.value,a=t.startKey,i=t.startOffset,s=t.endKey,u=t.endOffset,c=o.document,l=c.hasVoidParent(a),f=c.hasVoidParent(s),d=c.getClosestBlock(a),y=c.getClosestBlock(s),h=0==i&&0==u&&0==l&&a==d.getFirstText().key&&s==y.getFirstText().key;if(h&&f){var v=c.getPreviousText(s);s=v.key,u=v.text.length,f=c.hasVoidParent(s)}for(;l;){var p=c.getClosestVoid(a),g=c.getNextText(a);if(e.removeNodeByKey(p.key,{normalize:!1}),a==s)return;if(!g)return;c=e.value.document,a=g.key,i=0,l=c.hasVoidParent(a)}for(;f;){var k=c.getClosestVoid(s),m=c.getPreviousText(s);e.removeNodeByKey(k.key,{normalize:!1}),c=e.value.document,s=m.key,u=m.text.length,f=c.hasVoidParent(s)}if(a==s&&h)e.removeNodeByKey(d.key,{normalize:n});else if(a!=s){d=c.getClosestBlock(a),y=c.getClosestBlock(s);var b=c.getNode(a),A=c.getNode(s),O=b.text.length-i,w=u,x=c.getCommonAncestor(a,s),S=x.getFurthestAncestor(a),B=x.getFurthestAncestor(s),F=c.getParent(d.key),T=F.nodes.indexOf(d),K=F.nodes.indexOf(y),j=void 0;for(j=b;j.key!=S.key;){var _=c.getParent(j.key),E=_.nodes.indexOf(j);_.nodes.slice(E+1).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),j=_}var C=x.nodes.indexOf(S),N=x.nodes.indexOf(B);for(x.nodes.slice(C+1,N).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),j=A;j.key!=B.key;){var z=c.getParent(j.key),P=z.nodes.indexOf(j);z.nodes.slice(0,P).reverse().forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})}),j=z}if(0!=O&&e.removeTextByKey(a,i,O,{normalize:!1}),0!=w&&e.removeTextByKey(s,0,u,{normalize:!1}),d.key!=y.key){var L=(c=e.value.document).getFurthestOnlyChildAncestor(y.key);K!=T+1&&e.moveNodeByKey(y.key,F.key,T+1,{normalize:!1}),h?e.removeNodeByKey(d.key,{normalize:!1}):e.mergeNodeByKey(y.key,{normalize:!1}),L&&e.removeNodeByKey(L.key,{normalize:!1})}n&&e.normalizeNodeByKey(x.key)}else{var D=i,M=u-i;e.removeTextByKey(a,D,M,{normalize:n})}}},deleteCharBackwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o),s=i.getOffset(o)+a,u=i.text,c=Jn.getCharOffsetBackward(u,s);e.deleteBackwardAtRange(t,c,r)},deleteLineBackwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o).getOffset(o)+a;e.deleteBackwardAtRange(t,i,r)},deleteWordBackwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o),s=i.getOffset(o)+a,u=i.text,c=Jn.getWordOffsetBackward(u,s);e.deleteBackwardAtRange(t,c,r)},deleteBackwardAtRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0!==r){var o=e.getFlag("normalize",n),a=e.value.document,i=t,s=i.startKey,u=i.focusOffset;if(t.isExpanded)e.deleteAtRange(t,{normalize:o});else{var c=a.getClosestVoid(s);if(c)e.removeNodeByKey(c.key,{normalize:o});else{var l=a.getClosestBlock(s);if(l&&l.isEmpty&&1!==a.nodes.size)e.removeNodeByKey(l.key,{normalize:o});else if(!t.isAtStartOf(a)){var f=a.getDescendant(s);if(t.isAtStartOf(f)){var d=a.getPreviousText(f.key),y=a.getClosestBlock(d.key),h=a.getClosestVoid(d.key);if(h)return void e.removeNodeByKey(h.key,{normalize:o});if(1==r&&y!=l)return t=t.merge({anchorKey:d.key,anchorOffset:d.text.length}),void e.deleteAtRange(t,{normalize:o})}if(r<u)return t=t.merge({focusOffset:u-r,isBackward:!0}),void e.deleteAtRange(t,{normalize:o});for(var v=f,p=0,g=u;r>g;){var k=g+(v=a.getPreviousText(v.key)).text.length;if(r<=k){p=k-r;break}g=k}t=t.merge({focusKey:v.key,focusOffset:p,isBackward:!0}),e.deleteAtRange(t,{normalize:o})}}}}},deleteCharForwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o),s=i.getOffset(o)+a,u=i.text,c=Jn.getCharOffsetForward(u,s);e.deleteForwardAtRange(t,c,r)},deleteLineForwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o),s=i.getOffset(o)+a;e.deleteForwardAtRange(t,i.text.length-s,r)},deleteWordForwardAtRange:function(e,t,r){var n=e.value.document,o=t.startKey,a=t.startOffset,i=n.getClosestBlock(o),s=i.getOffset(o)+a,u=i.text,c=Jn.getWordOffsetForward(u,s);e.deleteForwardAtRange(t,c,r)},deleteForwardAtRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0!==r){var o=e.getFlag("normalize",n),a=e.value.document,i=t,s=i.startKey,u=i.focusOffset;if(t.isExpanded)e.deleteAtRange(t,{normalize:o});else{var c=a.getClosestVoid(s);if(c)e.removeNodeByKey(c.key,{normalize:o});else{var l=a.getClosestBlock(s);if(l&&l.isEmpty&&1!==a.nodes.size){var f=a.getNextBlock(l.key);return e.removeNodeByKey(l.key,{normalize:o}),void(f&&f.key&&e.moveToStartOf(f))}if(!t.isAtEndOf(a)){var d=a.getDescendant(s);if(t.isAtEndOf(d)){var y=a.getNextText(d.key),h=a.getClosestBlock(y.key),v=a.getClosestVoid(y.key);if(v)return void e.removeNodeByKey(v.key,{normalize:o});if(1==r&&h!=l)return t=t.merge({focusKey:y.key,focusOffset:0}),void e.deleteAtRange(t,{normalize:o})}if(r<=d.text.length-u)return t=t.merge({focusOffset:u+r}),void e.deleteAtRange(t,{normalize:o});for(var p=d,g=u,k=d.text.length-u;r>k;){var m=k+(p=a.getNextText(p.key)).text.length;if(r<=m){g=r-k;break}k=m}if(a.hasVoidParent(p.key)){var b=a.getClosestVoid(p.key);g=(p=a.getPreviousText(b.key)).text.length}t=t.merge({focusKey:p.key,focusOffset:g}),e.deleteAtRange(t,{normalize:o})}}}}},insertBlockAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=ae.create(r);var o=e.getFlag("normalize",n);t.isExpanded&&(e.deleteAtRange(t),t=t.collapseToStart());var a=e.value.document,i=t,s=i.startKey,u=i.startOffset,c=a.getClosestBlock(s),l=a.getClosestInline(s),f=a.getParent(c.key),d=f.nodes.indexOf(c);if(c.isVoid){var y=t.isAtEndOf(c)?1:0;e.insertNodeByKey(f.key,d+y,r,{normalize:o})}else if(c.isEmpty)e.insertNodeByKey(f.key,d+1,r,{normalize:o});else if(t.isAtStartOf(c))e.insertNodeByKey(f.key,d,r,{normalize:o});else if(t.isAtEndOf(c))e.insertNodeByKey(f.key,d+1,r,{normalize:o});else{if(l&&l.isVoid){var h=t.isAtEndOf(l),v=h?a.getNextText(s):a.getPreviousText(s),p=h?t.moveToStartOf(v):t.moveToEndOf(v);s=p.startKey,u=p.startOffset}e.splitDescendantsByKey(c.key,s,u,{normalize:!1}),e.insertNodeByKey(f.key,d+1,r,{normalize:o})}o&&e.normalizeNodeByKey(f.key)},insertFragmentAtRange:function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getFlag("normalize",o);if(r.isExpanded&&(e.deleteAtRange(r,{normalize:!1}),r=e.value.document.getDescendant(r.startKey)?r.collapseToStart():r.collapseTo(r.endKey,0)),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var i=r,s=i.startKey,u=i.startOffset,c=e.value.document,l=c.getDescendant(s),f=c.getClosestBlock(l.key),d=f.getFurthestAncestor(l.key),y=r.isAtStartOf(f),h=c.getParent(f.key),v=h.nodes.indexOf(f),p=n.getBlocks(),g=n.nodes.first(),k=n.nodes.last(),m=p.first(),b=p.last();if(m==b&&m.isVoid)e.insertBlockAtRange(r,m,o);else if(n.hasBlocks(g.key)||n.hasBlocks(k.key))n.nodes.reverse().forEach(function(t){e.insertBlockAtRange(r,t,o)});else{if(m!=b){var A=n.getFurthest(m.key,function(e){return 1==e.nodes.size})||m,O=h.nodes.indexOf(f);(n=n.removeDescendant(A.key)).nodes.forEach(function(t,r){var n=O+r+1;e.insertNodeByKey(h.key,n,t,{normalize:!1})})}if(0!=u&&e.splitDescendantsByKey(d.key,s,u,{normalize:!1}),l=(c=e.value.document).getDescendant(s),d=(f=c.getClosestBlock(s)).getFurthestAncestor(l.key),m!=b){var w=y?d:f.getNextSibling(d.key),x=w?f.nodes.skipUntil(function(e){return e.key==w.key}):t.List(),S=b.nodes.size;x.forEach(function(t,r){var n=S+r;e.moveNodeByKey(t.key,b.key,n,{normalize:!1})})}if(f.isEmpty)e.removeNodeByKey(f.key,{normalize:!1}),e.insertNodeByKey(h.key,v,m,{normalize:!1});else{var B=f.getFurthestAncestor(l.key),F=f.nodes.indexOf(B);m.nodes.forEach(function(t,r){var n=F+r+(0==u?0:1);e.insertNodeByKey(f.key,n,t,{normalize:!1})})}a&&e.normalizeNodeByKey(h.key)}}},insertInlineAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getFlag("normalize",n);r=ln.create(r),t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),t=t.collapseToStart());var a=e.value.document,i=t,s=i.startKey,u=i.startOffset,c=a.getParent(s),l=a.assertDescendant(s),f=c.nodes.indexOf(l);c.isVoid||(e.splitNodeByKey(s,u,{normalize:!1}),e.insertNodeByKey(c.key,f+1,r,{normalize:!1}),o&&e.normalizeNodeByKey(c.key))},insertTextAtRange:function(e,t,r,n){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).normalize,a=e.value.document,i=t.startKey,s=i,u=t.startOffset;if(!a.getParent(i).isVoid&&(t.isExpanded&&(e.deleteAtRange(t,{normalize:!1}),e.value.startKey!==s&&(s=e.value.startKey,u=e.value.startOffset)),void 0===o&&(o=t.isExpanded&&n&&0!==n.size),e.insertTextByKey(s,u,r,n,{normalize:!1}),o)){var c=a.getCommonAncestor(i,t.endKey),l=a.getAncestors(c.key).push(c).findLast(function(t){return e.value.document.getDescendant(t.key)}),f=l?l.key:i;e.normalizeNodeByKey(f)}},removeMarkAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var o=e.getFlag("normalize",n),a=e.value.document.getTextsAtRange(t),i=t.startKey,s=t.startOffset,u=t.endKey,c=t.endOffset;a.forEach(function(t){var n=t.key,a=0,l=t.text.length;n==i&&(a=s),n==u&&(l=c),n==i&&n==u&&(l=c-s),e.removeMarkByKey(n,a,l,r,{normalize:o})})}},setBlocksAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getFlag("normalize",n),a=e.value.document,i=a.getBlocksAtRange(t),s=t.startKey,u=t.startOffset,c=t.endKey,l=t.endOffset,f=t.isCollapsed,d=a.hasVoidParent(s),y=a.getClosestBlock(s),h=a.getClosestBlock(c);(0==f&&0==u&&0==l&&0==d&&s==y.getFirstText().key&&c==h.getFirstText().key?i.slice(0,-1):i).forEach(function(t){e.setNodeByKey(t.key,r,{normalize:o})})},setBlockAtRange:function(){J.deprecate("slate@0.33.0","The `setBlockAtRange` method of Slate changes has been renamed to `setBlocksAtRange`."),In.setBlocksAtRange.apply(In,arguments)},setInlinesAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getFlag("normalize",n);e.value.document.getInlinesAtRange(t).forEach(function(t){e.setNodeByKey(t.key,r,{normalize:o})})},setInlineAtRange:function(){J.deprecate("slate@0.33.0","The `setInlineAtRange` method of Slate changes has been renamed to `setInlinesAtRange`."),In.setInlinesAtRange.apply(In,arguments)},splitBlockAtRange:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getFlag("normalize",n),a=t,i=a.startKey,s=a.startOffset,u=a.endOffset,c=a.endKey,l=e.value.document,f=l.assertDescendant(i),d=l.getClosestBlock(f.key),y=0;d&&"block"==d.object&&y<r;)f=d,d=l.getClosestBlock(d.key),y++;if(e.splitDescendantsByKey(f.key,i,s,{normalize:o&&t.isCollapsed}),t.isExpanded){t.isBackward&&(t=t.flip());var h=e.value.document.getNextBlock(f.key);t=t.moveAnchorToStartOf(h),i===c&&(t=t.moveFocusTo(t.anchorKey,u-s)),e.deleteAtRange(t,{normalize:o})}},splitInlineAtRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.getFlag("normalize",n);t.isExpanded&&(e.deleteAtRange(t,{normalize:o}),t=t.collapseToStart());for(var a=t,i=a.startKey,s=a.startOffset,u=e.value.document,c=u.assertDescendant(i),l=u.getClosestInline(c.key),f=0;l&&"inline"==l.object&&f<r;)c=l,l=u.getClosestInline(l.key),f++;e.splitDescendantsByKey(c.key,i,s,{normalize:o})},toggleMarkAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){r=yn.create(r);var o=e.getFlag("normalize",n);e.value.document.getActiveMarksAtRange(t).some(function(e){return e.equals(r)})?e.removeMarkAtRange(t,r,{normalize:o}):e.addMarkAtRange(t,r,{normalize:o})}},unwrapBlockAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=Kn.createProperties(r);var o=e.getFlag("normalize",n),a=e.value.document.getBlocksAtRange(t);a.map(function(t){return e.value.document.getClosest(t.key,function(e){return"block"==e.object&&((null==r.type||e.type==r.type)&&((null==r.isVoid||e.isVoid==r.isVoid)&&!(null!=r.data&&!e.data.isSuperset(r.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var r=t.nodes.first(),n=t.nodes.last(),o=e.value.document.getParent(t.key),i=o.nodes.indexOf(t),s=t.nodes.filter(function(e){return a.some(function(t){return e==t||e.hasDescendant(t.key)})}),u=s.first(),c=s.last();if(r==u&&n==c)t.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,o.key,i+r,{normalize:!1})}),e.removeNodeByKey(t.key,{normalize:!1});else if(n==c)t.nodes.skipUntil(function(e){return e==u}).forEach(function(t,r){e.moveNodeByKey(t.key,o.key,i+1+r,{normalize:!1})});else if(r==u)t.nodes.takeUntil(function(e){return e==c}).push(c).forEach(function(t,r){e.moveNodeByKey(t.key,o.key,i+r,{normalize:!1})});else{var l=u.getFirstText();e.splitDescendantsByKey(t.key,l.key,0,{normalize:!1}),s.forEach(function(t,r){if(0==r){var n=t;t=e.value.document.getNextBlock(t.key),e.removeNodeByKey(n.key,{normalize:!1})}e.moveNodeByKey(t.key,o.key,i+1+r,{normalize:!1})})}}),o&&e.normalizeDocument()},unwrapInlineAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=Kn.createProperties(r);var o=e.getFlag("normalize",n),a=e.value.document;a.getTextsAtRange(t).map(function(e){return a.getClosest(e.key,function(e){return"inline"==e.object&&((null==r.type||e.type==r.type)&&((null==r.isVoid||e.isVoid==r.isVoid)&&!(null!=r.data&&!e.data.isSuperset(r.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var r=e.value.document.getParent(t.key),n=r.nodes.indexOf(t);t.nodes.forEach(function(t,o){e.moveNodeByKey(t.key,r.key,n+o,{normalize:!1})})}),o&&e.normalizeDocument()},wrapBlockAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=(r=ae.create(r)).set("nodes",r.nodes.clear());var o=e.getFlag("normalize",n),a=e.value.document,i=a.getBlocksAtRange(t),s=i.first(),u=i.last(),c=void 0,l=void 0,f=void 0;if(1===i.length?(c=a.getParent(s.key),l=i):c=a.getClosest(s.key,function(e){return!!a.getClosest(u.key,function(t){return e==t})}),null==c&&(c=a),null==l){var d=c.nodes.reduce(function(e,t,r){return(t==s||t.hasDescendant(s.key))&&(e[0]=r),(t==u||t.hasDescendant(u.key))&&(e[1]=r),e},[]);f=d[0],l=c.nodes.slice(d[0],d[1]+1)}null==f&&(f=c.nodes.indexOf(l.first())),e.insertNodeByKey(c.key,f,r,{normalize:!1}),l.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,n,{normalize:!1})}),o&&e.normalizeNodeByKey(c.key)},wrapInlineAtRange:function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.value.document,i=e.getFlag("normalize",o),s=r.startKey,u=r.startOffset,c=r.endKey,l=r.endOffset;if(r.isCollapsed){var f=a.getClosestInline(s);if(!f.isVoid)return;return e.wrapInlineByKey(f.key,n,o)}n=(n=ln.create(n)).set("nodes",n.nodes.clear());var d=a.getBlocksAtRange(r),y=a.getClosestBlock(s),h=a.getClosestBlock(c),v=a.getClosestInline(s),p=a.getClosestInline(c),g=y.getFurthestAncestor(s),k=h.getFurthestAncestor(c);v&&v==p||(e.splitDescendantsByKey(k.key,c,l,{normalize:!1}),e.splitDescendantsByKey(g.key,s,u,{normalize:!1})),y=(a=e.value.document).getDescendant(y.key),h=a.getDescendant(h.key),g=y.getFurthestAncestor(s),k=h.getFurthestAncestor(c);var m=y.nodes.indexOf(g),b=h.nodes.indexOf(k);if(v&&v==p){var A=y.getTextsAtRange(r).get(0).splitText(u)[1].splitText(l-u)[0];n=n.set("nodes",t.List([A])),In.insertInlineAtRange(e,r,n,{normalize:!1});var O=n.getFirstText().key,w={anchorKey:O,focusKey:O,anchorOffset:0,focusOffset:l-u,isFocused:!0};e.select(w)}else if(y==h){g=(y=(a=e.value.document).getClosestBlock(s)).getFurthestAncestor(s);var x=a.getNextSibling(g.key),S=y.nodes.indexOf(x),B=s==c?x:y.getFurthestAncestor(c),F=y.nodes.skipUntil(function(e){return e==x}).takeUntil(function(e){return e==B}).push(B),T=n.regenerateKey();e.insertNodeByKey(y.key,S,T,{normalize:!1}),F.forEach(function(t,r){e.moveNodeByKey(t.key,T.key,r,{normalize:!1})}),i&&e.normalizeNodeByKey(y.key)}else{var K=y.nodes.slice(m+1),j=h.nodes.slice(0,b+1),_=n.regenerateKey(),E=n.regenerateKey();e.insertNodeByKey(y.key,m+1,_,{normalize:!1}),e.insertNodeByKey(h.key,b,E,{normalize:!1}),K.forEach(function(t,r){e.moveNodeByKey(t.key,_.key,r,{normalize:!1})}),j.forEach(function(t,r){e.moveNodeByKey(t.key,E.key,r,{normalize:!1})}),i&&e.normalizeNodeByKey(y.key).normalizeNodeByKey(h.key),d.slice(1,-1).forEach(function(t){var r=n.regenerateKey();e.insertNodeByKey(t.key,0,r,{normalize:!1}),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,n,{normalize:!1})}),i&&e.normalizeNodeByKey(t.key)})}},wrapTextAtRange:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.getFlag("normalize",o),i=t.startKey,s=t.endKey,u=t.collapseToStart(),c=t.collapseToEnd();i==s&&(c=c.move(r.length)),e.insertTextAtRange(u,r,[],{normalize:a}),e.insertTextAtRange(c,n,[],{normalize:a})}},Vn={addMarkByKey:function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};o=yn.create(o);var i=e.getFlag("normalize",a),s=e.value,u=s.document,c=u.getPath(t),l=[],f=r,d=r+n,y=0;if(u.getNode(t).getLeaves().forEach(function(e){var t=y,r=t+e.text.length;if(y+=e.text.length,!(r<f||d<t||e.marks.has(o))){var n=Math.max(t,f),a=Math.min(r,d);l.push({type:"add_mark",value:s,path:c,offset:n,length:a-n,mark:o})}}),e.applyOperations(l),i){var h=u.getParent(t);e.normalizeNodeByKey(h.key)}},insertFragmentByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.getFlag("normalize",o);n.nodes.forEach(function(n,o){e.insertNodeByKey(t,r+o,n)}),a&&e.normalizeNodeByKey(t)},insertNodeByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.getFlag("normalize",o),i=e.value,s=i.document.getPath(t);e.applyOperation({type:"insert_node",value:i,path:[].concat(ne(s),[r]),node:n}),a&&e.normalizeNodeByKey(t)},insertTextByKey:function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=e.getFlag("normalize",a),s=e.value,u=s.document,c=u.getPath(t),l=u.getNode(t);if(o=o||l.getMarksAtIndex(r),e.applyOperation({type:"insert_text",value:s,path:c,offset:r,text:n,marks:o}),i){var f=u.getParent(t);e.normalizeNodeByKey(f.key)}},mergeNodeByKey:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getFlag("normalize",r),o=e.value,a=o.document,i=a.getPath(t),s=a.getDescendant(t),u=a.getPreviousSibling(t);if(!u)throw new Error('Unable to merge node with key "'+t+'", no previous key.');var c="text"==u.object?u.text.length:u.nodes.size;if(e.applyOperation({type:"merge_node",value:o,path:i,position:c,properties:{type:s.type,data:s.data},target:null}),n){var l=a.getParent(t);e.normalizeNodeByKey(l.key)}},moveNodeByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.getFlag("normalize",o),i=e.value,s=i.document,u=s.getPath(t),c=s.getPath(r);if(e.applyOperation({type:"move_node",value:i,path:u,newPath:[].concat(ne(c),[n])}),a){var l=s.getCommonAncestor(t,r);e.normalizeNodeByKey(l.key)}},removeMarkByKey:function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};o=yn.create(o);var i=e.getFlag("normalize",a),s=e.value,u=s.document,c=u.getPath(t),l=[],f=r,d=r+n,y=0;if(u.getNode(t).getLeaves().forEach(function(e){var t=y,r=t+e.text.length;if(y+=e.text.length,!(r<f||d<t)&&e.marks.has(o)){var n=Math.max(t,f),a=Math.min(r,d);l.push({type:"remove_mark",value:s,path:c,offset:n,length:a-n,mark:o})}}),e.applyOperations(l),i){var h=u.getParent(t);e.normalizeNodeByKey(h.key)}},removeAllMarksByKey:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.state.document.getNode(t);("text"===n.object?[n]:n.getTextsAsArray()).forEach(function(t){t.getMarksAsArray().forEach(function(n){e.removeMarkByKey(t.key,0,t.text.length,n,r)})})},removeNodeByKey:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getFlag("normalize",r),o=e.value,a=o.document,i=a.getPath(t),s=a.getNode(t);if(e.applyOperation({type:"remove_node",value:o,path:i,node:s}),n){var u=a.getParent(t);e.normalizeNodeByKey(u.key)}},setTextByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.value.document.getDescendant(t);e.replaceTextByKey(t,0,a.text.length,r,n,o)},replaceTextByKey:function(e,t,r,n,o,a,i){var s=e.value.document,u=s.getDescendant(t);n+r>u.text.length&&(n=u.text.length-r);var c=bn.create({anchorKey:t,focusKey:t,anchorOffset:r,focusOffset:r+n}),l=s.getActiveMarksAtRange(c);e.removeTextByKey(t,r,n,{normalize:!1}),a?l&&(l=l.filter(function(e){return!a.find(function(t){return e.type===t.type})}),a=l.merge(a)):a=l||[],e.insertTextByKey(t,r,o,a,i)},removeTextByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.getFlag("normalize",o),i=e.value,s=i.document,u=s.getPath(t),c=s.getNode(t),l=c.getLeaves(),f=c.text,d=[],y=r,h=r+n,v=0;if(l.forEach(function(e){var t=v,r=t+e.text.length;if(v+=e.text.length,!(r<y||h<t)){var n=Math.max(t,y),o=Math.min(r,h),a=f.slice(n,o);d.push({type:"remove_text",value:i,path:u,offset:n,text:a,marks:e.marks})}}),e.applyOperations(d.reverse()),a){var p=s.getClosestBlock(t);e.normalizeNodeByKey(p.key)}},replaceNodeByKey:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=Kn.create(r);var o=e.getFlag("normalize",n),a=e.value.document,i=a.getNode(t),s=a.getParent(t),u=s.nodes.indexOf(i);e.removeNodeByKey(t,{normalize:!1}),e.insertNodeByKey(s.key,u,r,{normalize:!1}),o&&e.normalizeNodeByKey(s.key)},setMarkByKey:function(e,t,r,n,o,a){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};o=yn.create(o),a=yn.createProperties(a);var s=e.getFlag("normalize",i),u=e.value,c=u.document,l=c.getPath(t);if(e.applyOperation({type:"set_mark",value:u,path:l,offset:r,length:n,mark:o,properties:a}),s){var f=c.getParent(t);e.normalizeNodeByKey(f.key)}},setNodeByKey:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=Kn.createProperties(r);var o=e.getFlag("normalize",n),a=e.value,i=a.document,s=i.getPath(t),u=i.getNode(t);e.applyOperation({type:"set_node",value:a,path:s,node:u,properties:r}),o&&e.normalizeNodeByKey(u.key)},splitNodeByKey:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.normalize,a=void 0===o||o,i=n.target,s=void 0===i?null:i,u=e.value,c=u.document,l=c.getPath(t),f=c.getDescendantAtPath(l);if(e.applyOperation({type:"split_node",value:u,path:l,position:r,properties:{type:f.type,data:f.data},target:s}),a){var d=c.getParent(t);e.normalizeNodeByKey(d.key)}},splitDescendantsByKey:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t!=r){var a=e.getFlag("normalize",o),i=e.value.document,s=i.getNode(r),u=void 0,c=void 0;if(i.getAncestors(r).skipUntil(function(e){return e.key==t}).reverse().unshift(s).forEach(function(t){var r=null==c?null:c;c=u?t.nodes.indexOf(u)+1:n,u=t,e.splitNodeByKey(t.key,c,{normalize:!1,target:r})}),a){var l=i.getParent(t);e.normalizeNodeByKey(l.key)}}else e.splitNodeByKey(r,n,o)},unwrapInlineByKey:function(e,t,r,n){var o=e.value,a=o.document,i=o.selection,s=a.assertDescendant(t),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);e.unwrapInlineAtRange(l,r,n)},unwrapBlockByKey:function(e,t,r,n){var o=e.value,a=o.document,i=o.selection,s=a.assertDescendant(t),u=s.getFirstText(),c=s.getLastText(),l=i.moveToRangeOf(u,c);e.unwrapBlockAtRange(l,r,n)},unwrapNodeByKey:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getFlag("normalize",r),o=e.value.document,a=o.getParent(t),i=a.getChild(t),s=a.nodes.indexOf(i),u=0===s,c=s===a.nodes.size-1,l=o.getParent(a.key),f=l.nodes.indexOf(a);1===a.nodes.size?(e.moveNodeByKey(t,l.key,f,{normalize:!1}),e.removeNodeByKey(a.key,r)):u?e.moveNodeByKey(t,l.key,f,r):c?e.moveNodeByKey(t,l.key,f+1,r):(e.splitNodeByKey(a.key,s,{normalize:!1}),e.moveNodeByKey(t,l.key,f+1,{normalize:!1}),n&&e.normalizeNodeByKey(l.key))},wrapBlockByKey:function(e,t,r,n){r=(r=ae.create(r)).set("nodes",r.nodes.clear());var o=e.value.document,a=o.assertDescendant(t),i=o.getParent(a.key),s=i.nodes.indexOf(a);e.insertNodeByKey(i.key,s,r,{normalize:!1}),e.moveNodeByKey(a.key,r.key,0,n)},wrapInlineByKey:function(e,t,r,n){r=(r=ln.create(r)).set("nodes",r.nodes.clear());var o=e.value.document,a=o.assertDescendant(t),i=o.getParent(a.key),s=i.nodes.indexOf(a);e.insertNodeByKey(i.key,s,r,{normalize:!1}),e.moveNodeByKey(a.key,r.key,0,n)},wrapNodeByKey:function(e,t,r){"block"!=(r=(r=Kn.create(r)).set("nodes",r.nodes.clear())).object?"inline"!=r.object||e.wrapInlineByKey(t,r):e.wrapBlockByKey(t,r)}},Un={add_mark:["value","path","offset","length","mark"],insert_node:["value","path","node"],insert_text:["value","path","offset","text","marks"],merge_node:["value","path","position","properties","target"],move_node:["value","path","newPath"],remove_mark:["value","path","offset","length","mark"],remove_node:["value","path","node"],remove_text:["value","path","offset","text","marks"],set_mark:["value","path","offset","length","mark","properties"],set_node:["value","path","node","properties"],set_selection:["value","selection","properties"],set_value:["value","properties"],split_node:["value","path","position","properties","target"]};var Wn=function(){this.__data__=new Gt,this.size=0};var Hn=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var $n=function(e){return this.__data__.get(e)};var qn=function(e){return this.__data__.has(e)},Gn=200;var Xn=function(e,t){var r=this.__data__;if(r instanceof Gt){var n=r.__data__;if(!Xt||n.length<Gn-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ar(n)}return r.set(e,t),this.size=r.size,this};function Yn(e){var t=this.__data__=new Gt(e);this.size=t.size}Yn.prototype.clear=Wn,Yn.prototype.delete=Hn,Yn.prototype.get=$n,Yn.prototype.has=qn,Yn.prototype.set=Xn;var Zn=Yn,Qn="__lodash_hash_undefined__";var eo=function(e){return this.__data__.set(e,Qn),this};var to=function(e){return this.__data__.has(e)};function ro(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ar;++t<r;)this.add(e[t])}ro.prototype.add=ro.prototype.push=eo,ro.prototype.has=to;var no=ro;var oo=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var ao=function(e,t){return e.has(t)},io=1,so=2;var uo=function(e,t,r,n,o,a){var i=r&io,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var l=-1,f=!0,d=r&so?new no:void 0;for(a.set(e,t),a.set(t,e);++l<s;){var y=e[l],h=t[l];if(n)var v=i?n(h,y,l,t,e,a):n(y,h,l,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!oo(t,function(e,t){if(!ao(d,t)&&(y===e||o(y,e,r,n,a)))return d.push(t)})){f=!1;break}}else if(y!==h&&!o(y,h,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f},co=Ie.Uint8Array;var lo=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var fo=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},yo=1,ho=2,vo="[object Boolean]",po="[object Date]",go="[object Error]",ko="[object Map]",mo="[object Number]",bo="[object RegExp]",Ao="[object Set]",Oo="[object String]",wo="[object Symbol]",xo="[object ArrayBuffer]",So="[object DataView]",Bo=Ve?Ve.prototype:void 0,Fo=Bo?Bo.valueOf:void 0;var To=function(e,t,r,n,o,a,i){switch(r){case So:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case xo:return!(e.byteLength!=t.byteLength||!a(new co(e),new co(t)));case vo:case po:case mo:return Jt(+e,+t);case go:return e.name==t.name&&e.message==t.message;case bo:case Oo:return e==t+"";case ko:var s=lo;case Ao:var u=n&yo;if(s||(s=fo),e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;n|=ho,i.set(e,t);var l=uo(s(e),s(t),n,o,a,i);return i.delete(e),l;case wo:if(Fo)return Fo.call(e)==Fo.call(t)}return!1};var Ko=function(e,t,r){var n=t(e);return Me(e)?n:Wr(n,r(e))};var jo=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a};var _o=function(){return[]},Eo=Object.prototype.propertyIsEnumerable,Co=Object.getOwnPropertySymbols,No=Co?function(e){return null==e?[]:(e=Object(e),jo(Co(e),function(t){return Eo.call(e,t)}))}:_o;var zo=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var Po=function(){return!1},Lo=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Ie.Buffer:void 0,a=(o?o.isBuffer:void 0)||Po;e.exports=a}),Do={};Do["[object Float32Array]"]=Do["[object Float64Array]"]=Do["[object Int8Array]"]=Do["[object Int16Array]"]=Do["[object Int32Array]"]=Do["[object Uint8Array]"]=Do["[object Uint8ClampedArray]"]=Do["[object Uint16Array]"]=Do["[object Uint32Array]"]=!0,Do["[object Arguments]"]=Do["[object Array]"]=Do["[object ArrayBuffer]"]=Do["[object Boolean]"]=Do["[object DataView]"]=Do["[object Date]"]=Do["[object Error]"]=Do["[object Function]"]=Do["[object Map]"]=Do["[object Number]"]=Do["[object Object]"]=Do["[object RegExp]"]=Do["[object Set]"]=Do["[object String]"]=Do["[object WeakMap]"]=!1;var Mo=function(e){return tt(e)&&Jr(e.length)&&!!Do[et(e)]};var Ro=function(e){return function(t){return e(t)}},Jo=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&Re.process,a=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}),Io=Jo&&Jo.isTypedArray,Vo=Io?Ro(Io):Mo,Uo=Object.prototype.hasOwnProperty;var Wo=function(e,t){var r=Me(e),n=!r&&Mr(e),o=!r&&!n&&Lo(e),a=!r&&!n&&!o&&Vo(e),i=r||n||o||a,s=i?zo(e.length,String):[],u=s.length;for(var c in e)!t&&!Uo.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jr(c,u))||s.push(c);return s},Ho=Object.prototype;var $o=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ho)};var qo=function(e,t){return function(r){return e(t(r))}},Go=qo(Object.keys,Object),Xo=Object.prototype.hasOwnProperty;var Yo=function(e){if(!$o(e))return Go(e);var t=[];for(var r in Object(e))Xo.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Zo=function(e){return null!=e&&Jr(e.length)&&!yt(e)};var Qo=function(e){return Zo(e)?Wo(e):Yo(e)};var ea=function(e){return Ko(e,Qo,No)},ta=1,ra=Object.prototype.hasOwnProperty;var na=function(e,t,r,n,o,a){var i=r&ta,s=ea(e),u=s.length;if(u!=ea(t).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in t:ra.call(t,l)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var d=!0;a.set(e,t),a.set(t,e);for(var y=i;++c<u;){var h=e[l=s[c]],v=t[l];if(n)var p=i?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===p?h===v||o(h,v,r,n,a):p)){d=!1;break}y||(y="constructor"==l)}if(d&&!y){var g=e.constructor,k=t.constructor;g!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof k&&k instanceof k)&&(d=!1)}return a.delete(e),a.delete(t),d},oa=Ft(Ie,"DataView"),aa=Ft(Ie,"Promise"),ia=Ft(Ie,"Set"),sa=Ft(Ie,"WeakMap"),ua=kt(oa),ca=kt(Xt),la=kt(aa),fa=kt(ia),da=kt(sa),ya=et;(oa&&"[object DataView]"!=ya(new oa(new ArrayBuffer(1)))||Xt&&"[object Map]"!=ya(new Xt)||aa&&"[object Promise]"!=ya(aa.resolve())||ia&&"[object Set]"!=ya(new ia)||sa&&"[object WeakMap]"!=ya(new sa))&&(ya=function(e){var t=et(e),r="[object Object]"==t?e.constructor:void 0,n=r?kt(r):"";if(n)switch(n){case ua:return"[object DataView]";case ca:return"[object Map]";case la:return"[object Promise]";case fa:return"[object Set]";case da:return"[object WeakMap]"}return t});var ha=ya,va=1,pa="[object Arguments]",ga="[object Array]",ka="[object Object]",ma=Object.prototype.hasOwnProperty;var ba=function(e,t,r,n,o,a){var i=Me(e),s=Me(t),u=i?ga:ha(e),c=s?ga:ha(t),l=(u=u==pa?ka:u)==ka,f=(c=c==pa?ka:c)==ka,d=u==c;if(d&&Lo(e)){if(!Lo(t))return!1;i=!0,l=!1}if(d&&!l)return a||(a=new Zn),i||Vo(e)?uo(e,t,r,n,o,a):To(e,t,u,r,n,o,a);if(!(r&va)){var y=l&&ma.call(e,"__wrapped__"),h=f&&ma.call(t,"__wrapped__");if(y||h){var v=y?e.value():e,p=h?t.value():t;return a||(a=new Zn),o(v,p,r,n,a)}}return!!d&&(a||(a=new Zn),na(e,t,r,n,o,a))};var Aa=function e(t,r,n,o,a){return t===r||(null==t||null==r||!tt(t)&&!tt(r)?t!=t&&r!=r:ba(t,r,n,o,e,a))};var Oa=function(e,t){return Aa(e,t)},wa=De("slate:history"),xa={redos:new t.Stack,undos:new t.Stack},Sa=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"save",value:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this,a=o,i=a.undos,s=a.redos,u=n.merge,c=n.skip,l=i.peek(),f=l&&l.last();if(null==c&&(c=!!(r=f)&&"set_selection"==e.type&&"set_selection"==r.type),c)return o;if(null==u&&(u=function(e,t){return!!t&&("set_selection"==e.type&&"set_selection"==t.type||"insert_text"==e.type&&"insert_text"==t.type&&e.offset==t.offset+t.text.length&&Oa(e.path,t.path)||"remove_text"==e.type&&"remove_text"==t.type&&e.offset+e.text.length==t.offset&&Oa(e.path,t.path))}(e,f)),wa("save",{operation:e,merge:u}),u&&l){var d=l.push(e);i=(i=i.pop()).push(d)}else{var y=new t.List([e]);i=i.push(y)}return i.size>100&&(i=i.take(100)),s=s.clear(),o=o.set("undos",i).set("redos",s)}},{key:"toJS",value:function(){return{object:this.object,redos:this.redos.toJS(),undos:this.undos.toJS()}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"history"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isHistory(e))return e;if(f(e))return r.fromJS(e);throw new Error("`History.create` only accepts objects or histories, but you passed it: "+e)}},{key:"createOperationsList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e))return e;if(Array.isArray(e))return new t.List(e);throw new Error("`History.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){var n=e.redos,o=void 0===n?[]:n,a=e.undos,i=void 0===a?[]:a;return new r({redos:new t.Stack(o.map(this.createOperationsList)),undos:new t.Stack(i.map(this.createOperationsList))})}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}}]),r}(t.Record(xa));Sa.isHistory=V.bind(null,"HISTORY"),Sa.prototype[I.HISTORY]=!0;var Ba=function(e,t,r){(void 0===r||Jt(e[t],r))&&(void 0!==r||t in e)||Sr(e,t,r)};var Fa=function(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(!1===r(a[u],u,a))break}return t}}(),Ta=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?Ie.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}});var Ka=function(e){var t=new e.constructor(e.byteLength);return new co(t).set(new co(e)),t};var ja=function(e,t){var r=t?Ka(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var _a=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},Ea=Object.create,Ca=function(){function e(){}return function(t){if(!st(t))return{};if(Ea)return Ea(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Na=qo(Object.getPrototypeOf,Object);var za=function(e){return"function"!=typeof e.constructor||$o(e)?{}:Ca(Na(e))};var Pa=function(e){return tt(e)&&Zo(e)},La="[object Object]",Da=Function.prototype,Ma=Object.prototype,Ra=Da.toString,Ja=Ma.hasOwnProperty,Ia=Ra.call(Object);var Va=function(e){if(!tt(e)||et(e)!=La)return!1;var t=Na(e);if(null===t)return!0;var r=Ja.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ra.call(r)==Ia};var Ua=function(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?Sr(r,s,u):Fr(r,s,u)}return r};var Wa=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Ha=Object.prototype.hasOwnProperty;var $a=function(e){if(!st(e))return Wa(e);var t=$o(e),r=[];for(var n in e)("constructor"!=n||!t&&Ha.call(e,n))&&r.push(n);return r};var qa=function(e){return Zo(e)?Wo(e,!0):$a(e)};var Ga=function(e){return Ua(e,qa(e))};var Xa=function(e,t,r,n,o,a,i){var s=e[r],u=t[r],c=i.get(u);if(c)Ba(e,r,c);else{var l=a?a(s,u,r+"",e,t,i):void 0,f=void 0===l;if(f){var d=Me(u),y=!d&&Lo(u),h=!d&&!y&&Vo(u);l=u,d||y||h?Me(s)?l=s:Pa(s)?l=_a(s):y?(f=!1,l=Ta(u,!0)):h?(f=!1,l=ja(u,!0)):l=[]:Va(u)||Mr(u)?(l=s,Mr(s)?l=Ga(s):(!st(s)||n&&yt(s))&&(l=za(u))):f=!1}f&&(i.set(u,l),o(l,u,n,a,i),i.delete(u)),Ba(e,r,l)}};var Ya=function e(t,r,n,o,a){t!==r&&Fa(r,function(i,s){if(st(i))a||(a=new Zn),Xa(t,r,s,n,e,o,a);else{var u=o?o(t[s],i,s+"",t,r,a):void 0;void 0===u&&(u=i),Ba(t,s,u)}},qa)};var Za=function(e,t){return an(Zr(e,t,en),e+"")};var Qa=function(e,t,r){if(!st(r))return!1;var n=typeof t;return!!("number"==n?Zo(r)&&jr(t,r.length):"string"==n&&t in r)&&Jt(r[t],e)};var ei=function(e){return Za(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&Qa(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}(function(e,t,r,n){Ya(e,t,r,n)}),ti=[{validateNode:function(e){if("document"==e.object){var t=e.nodes.filter(function(e){return"block"!=e.object});if(t.size)return function(e){t.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.object){var t=e.nodes.first();if(t){var r="block"==t.object?["block"]:["inline","text"],n=e.nodes.filter(function(e){return!r.includes(e.object)});if(n.size)return function(e){n.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})})}}}}},{validateNode:function(e){if("inline"==e.object){var t=e.nodes.filter(function(e){return"inline"!=e.object&&"text"!=e.object});if(t.size)return function(e){t.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})})}}}},{validateNode:function(e){if(!("block"!=e.object&&"inline"!=e.object||e.nodes.size>0))return function(t){var r=Tn.create();t.insertNodeByKey(e.key,0,r,{normalize:!1})}}},{validateNode:function(e){if("inline"==e.object||"block"==e.object){var t=e.nodes.filter(function(e){return"inline"===e.object&&e.isEmpty});if(t.size)return function(r){if(e.nodes.size==t.size){var n=Tn.create();r.insertNodeByKey(e.key,1,n,{normalize:!1})}t.forEach(function(e){r.removeNodeByKey(e.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.object||"inline"==e.object){var r=e.nodes.reduce(function(t,r,n){if("inline"!==r.object)return t;var o=n>0?e.nodes.get(n-1):null,a=e.nodes.get(n+1),i=!o,s=!a||"inline"==a.object;return(s||i)&&(t=t.push({insertAfter:s,insertBefore:i,index:n})),t},new t.List);if(r.size)return function(t){var n=0;r.forEach(function(r){var o=r.index,a=r.insertAfter;r.insertBefore&&(t.insertNodeByKey(e.key,n+o,Tn.create(),{normalize:!1}),n++),a&&(t.insertNodeByKey(e.key,n+o+1,Tn.create(),{normalize:!1}),n++)})}}}},{validateNode:function(e){if("block"==e.object||"inline"==e.object){var t=e.nodes.map(function(t,r){var n=e.nodes.get(r+1);if("text"==t.object&&n&&"text"==n.object)return n}).filter(Boolean);if(t.size)return function(e){t.reverse().forEach(function(t){e.mergeNodeByKey(t.key,{normalize:!1})})}}}},{validateNode:function(e){if("block"==e.object||"inline"==e.object){var t=e.nodes;if(!(t.size<=1)){var r=t.filter(function(e,r){if("text"==e.object&&!(e.text.length>0)){var n=r>0?t.get(r-1):null,o=t.get(r+1);if((n||"inline"!=o.object)&&(o||"inline"!=n.object)&&(!o||!n||"inline"!=o.object||"inline"!=n.object))return!0}});if(r.size)return function(e){r.forEach(function(t){e.removeNodeByKey(t.key,{normalize:!1})})}}}}}],ri=function(e){function t(){return X(this,t),te(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Q(t,e),Y(t,[{key:"getPluginsWith",value:function(e){return this.plugins.filter(function(t){return null!=t[e]})}},{key:"find",value:function(e){for(var t=this.getPluginsWith(e),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=!0,i=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=l[e].apply(l,n);if(null!=f)return f}}catch(e){i=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}}},{key:"map",value:function(e){for(var t=this.getPluginsWith(e),r=[],n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var i=!0,s=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value,d=f[e].apply(f,o);null!=d&&r.push(d)}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}return r}},{key:"run",value:function(e){for(var t=this.getPluginsWith(e),r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=!0,i=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(null!=l[e].apply(l,n))return}}catch(e){i=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}}},{key:"render",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return this.getPluginsWith(e).reduceRight(function(r,o){if(!o[e])return r;var a=o[e].apply(o,[t].concat(n));return null==a?r:(t.children=a,a)},void 0===t.children?null:t.children)}},{key:"object",get:function(){return"stack"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins;return new t({plugins:void 0===e?[]:e})}},{key:"isStack",value:function(e){return!(!e||!e[I.STACK])}}]),t}(t.Record({plugins:[]}));ri.prototype[I.STACK]=!0,i(ri.prototype,["getPluginsWith"]);var ni=De("slate:schema"),oi={stack:ri.create(),document:{},blocks:{},inlines:{}},ai=function(e){function t(){return X(this,t),te(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Q(t,e),Y(t,[{key:"getRule",value:function(e){switch(e.object){case"document":return this.document;case"block":return this.blocks[e.type];case"inline":return this.inlines[e.type]}}},{key:"getParentRules",value:function(){var e=this.blocks,t=this.inlines,r={};for(var n in e){var o=e[n];null!=o.parent&&(r[n]=o)}for(var a in t){var i=t[a];null!=i.parent&&(r[a]=i)}return 0==Object.keys(r).length?null:r}},{key:"fail",value:function(e,t){var r=this;return function(n){ni("normalizing",{violation:e,context:t});var o=t.rule,a=n.operations.size;o.normalize&&o.normalize(n,e,t),n.operations.size>a||r.normalize(n,e,t)}}},{key:"normalize",value:function(e,t,r){switch(t){case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":var n=r.child,o=r.node;return"text"==n.object&&"block"==o.object&&1==o.nodes.size?e.removeNodeByKey(o.key):e.removeNodeByKey(n.key);case"child_required":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":var a=r.node;return"document"==a.object?a.nodes.forEach(function(t){return e.removeNodeByKey(t.key)}):e.removeNodeByKey(a.key);case"node_data_invalid":var i=r.node,s=r.key;return void 0===i.data.get(s)&&"document"!=i.object?e.removeNodeByKey(i.key):e.setNodeByKey(i.key,{data:i.data.delete(s)});case"node_is_void_invalid":var u=r.node;return e.setNodeByKey(u.key,{isVoid:!u.isVoid});case"node_mark_invalid":var c=r.node,l=r.mark;return c.getTexts().forEach(function(t){return e.removeMarkByKey(t.key,0,t.text.length,l)})}}},{key:"validateNode",value:function(e){var t=this,r=this.stack.find("validateNode",e);if(r)return r;if("text"!=e.object){var n=this.getRule(e)||{},o=this.getParentRules(),a={node:e,rule:n};if(null!=n.isVoid&&e.isVoid!=n.isVoid)return this.fail("node_is_void_invalid",a);if(null!=n.data)for(var i in n.data){var s=n.data[i],u=e.data.get(i);if(!s(u))return this.fail("node_data_invalid",Z({},a,{key:i,value:u}))}if(null!=n.marks){var c=e.getMarks().toArray(),l=function(e){if(!n.marks.some(function(t){return t.type===e.type}))return{v:t.fail("node_mark_invalid",Z({},a,{mark:e}))}},f=!0,d=!1,y=void 0;try{for(var h,v=c[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var p=l(h.value);if("object"===(void 0===p?"undefined":G(p)))return p.v}}catch(e){d=!0,y=e}finally{try{!f&&v.return&&v.return()}finally{if(d)throw y}}}if(null!=n.text){var g=e.text;if(!n.text.test(g))return this.fail("node_text_invalid",Z({},a,{text:g}))}if(null!=n.first){var k=n.first,m=k.objects,b=k.types,A=e.nodes.first();if(A&&m&&!m.includes(A.object))return this.fail("first_child_object_invalid",Z({},a,{child:A}));if(A&&b&&!b.includes(A.type))return this.fail("first_child_type_invalid",Z({},a,{child:A}))}if(null!=n.last){var O=n.last,w=O.objects,x=O.types,S=e.nodes.last();if(S&&w&&!w.includes(S.object))return this.fail("last_child_object_invalid",Z({},a,{child:S}));if(S&&x&&!x.includes(S.type))return this.fail("last_child_type_invalid",Z({},a,{child:S}))}if(null!=n.nodes||null!=o){var B=function(){return j=null==j?null:0,C=K.shift(),_=C&&(null==C.min?0:C.min),N=C&&(null==C.max?1/0:C.max),!!C},F=function(){j-=1,E-=1},T=e.nodes.toArray(),K=null!=n.nodes?n.nodes.slice():[],j=void 0,_=void 0,E=void 0,C=void 0,N=void 0,z=void 0;for(null!=n.nodes&&B();E=null==E?0:E+1,j=null==j?0:j+1,z=T[E],null!=N&&j==N&&B(),z;){if(null!=o&&"text"!=z.object&&z.type in o){var P=o[z.type];if(null!=P.parent.objects&&!P.parent.objects.includes(e.object))return this.fail("parent_object_invalid",{node:z,parent:e,rule:P});if(null!=P.parent.types&&!P.parent.types.includes(e.type))return this.fail("parent_type_invalid",{node:z,parent:e,rule:P})}if(null!=n.nodes){if(!C)return this.fail("child_unknown",Z({},a,{child:z,index:E}));if(null!=C.objects&&!C.objects.includes(z.object)){if(j>=_&&B()){F();continue}return this.fail("child_object_invalid",Z({},a,{child:z,index:E}))}if(null!=C.types&&!C.types.includes(z.type)){if(j>=_&&B()){F();continue}return this.fail("child_type_invalid",Z({},a,{child:z,index:E}))}}}if(null!=n.nodes)for(;null!=_;){if(j<_)return this.fail("child_required",Z({},a,{index:E}));B()}}}}},{key:"toJS",value:function(){return{object:this.object,document:this.document,blocks:this.blocks,inlines:this.inlines}}},{key:"toJSON",value:function(){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS()}},{key:"object",get:function(){return"schema"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSchema(e))return e;if(f(e))return t.fromJS(e);throw new Error("`Schema.create` only accepts objects or schemas, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(t.isSchema(e))return e;var r=e.plugins;if(e.rules)throw new Error("Schemas in Slate have changed! They are no longer accept a `rules` property.");if(e.nodes)throw new Error("Schemas in Slate have changed! They are no longer accept a `nodes` property.");r||(r=[{schema:e}]);var n=function(){var e={document:{},blocks:{},inlines:{}};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice().reverse().forEach(function(t){if(t.schema){if(t.schema.rules)throw new Error("Schemas in Slate have changed! They are no longer accept a `rules` property.");if(t.schema.nodes)throw new Error("Schemas in Slate have changed! They are no longer accept a `nodes` property.");var r=t.schema,n=r.document,o=void 0===n?{}:n,a=r.blocks,i=void 0===a?{}:a,s=r.inlines,u=void 0===s?{}:s,c=Z({data:{},nodes:null},o),l={},f={};for(var d in i)l[d]=ii("block",d,i[d]);for(var y in u)f[y]=ii("inline",y,u[y]);ei(e.document,c,si),ei(e.blocks,l,si),ei(e.inlines,f,si)}}),e}(r),o=ri.create({plugins:[].concat(ne(ti),ne(r))});return new t(Z({},n,{stack:o}))}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),t.fromJS(e)}},{key:"isSchema",value:function(e){return!(!e||!e[I.SCHEMA])}}]),t}(t.Record(oi));function ii(e,t,r){return Z({data:{},isVoid:null,nodes:null,first:null,last:null,parent:null,text:null},r)}function si(e,t,r){return"objects"==r||"types"==r||"marks"==r?null==e?t:e.concat(t):null==t?e:t}ai.prototype[I.SCHEMA]=!0,i(ai.prototype,["getParentRules"]);var ui={data:new t.Map,decorations:null,document:mn.create(),history:Sa.create(),schema:ai.create(),selection:bn.create()},ci=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ns(Z({},e,{value:this}))}},{key:"toJS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,document:this.document.toJS(e)};if(e.preserveData&&(t.data=this.data.toJS()),e.preserveDecorations&&(t.decorations=this.decorations?this.decorations.toArray().map(function(e){return e.toJS()}):null),e.preserveHistory&&(t.history=this.history.toJS()),e.preserveSelection&&(t.selection=this.selection.toJS()),e.preserveSchema&&(t.schema=this.schema.toJS()),e.preserveSelection&&!e.preserveKeys){var r=this.document,n=this.selection;t.selection.anchorPath=n.isSet?r.getPath(n.anchorKey):null,t.selection.focusPath=n.isSet?r.getPath(n.focusKey):null,delete t.selection.anchorKey,delete t.selection.focusKey}if(e.preserveDecorations&&t.decorations&&!e.preserveKeys){var o=this.document;t.decorations=t.decorations.map(function(e){var t=Z({},e,{anchorPath:o.getPath(e.anchorKey),focusPath:o.getPath(e.focusKey)});return delete t.anchorKey,delete t.focusKey,t})}return t}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"object",get:function(){return"value"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}},{key:"hasUndos",get:function(){return this.history.undos.size>0}},{key:"hasRedos",get:function(){return this.history.redos.size>0}},{key:"isBlurred",get:function(){return this.selection.isBlurred}},{key:"isFocused",get:function(){return this.selection.isFocused}},{key:"isCollapsed",get:function(){return this.selection.isCollapsed}},{key:"isExpanded",get:function(){return this.selection.isExpanded}},{key:"isBackward",get:function(){return this.selection.isBackward}},{key:"isForward",get:function(){return this.selection.isForward}},{key:"startKey",get:function(){return this.selection.startKey}},{key:"endKey",get:function(){return this.selection.endKey}},{key:"startOffset",get:function(){return this.selection.startOffset}},{key:"endOffset",get:function(){return this.selection.endOffset}},{key:"anchorKey",get:function(){return this.selection.anchorKey}},{key:"focusKey",get:function(){return this.selection.focusKey}},{key:"anchorOffset",get:function(){return this.selection.anchorOffset}},{key:"focusOffset",get:function(){return this.selection.focusOffset}},{key:"startBlock",get:function(){return this.startKey&&this.document.getClosestBlock(this.startKey)}},{key:"endBlock",get:function(){return this.endKey&&this.document.getClosestBlock(this.endKey)}},{key:"anchorBlock",get:function(){return this.anchorKey&&this.document.getClosestBlock(this.anchorKey)}},{key:"focusBlock",get:function(){return this.focusKey&&this.document.getClosestBlock(this.focusKey)}},{key:"startInline",get:function(){return this.startKey&&this.document.getClosestInline(this.startKey)}},{key:"endInline",get:function(){return this.endKey&&this.document.getClosestInline(this.endKey)}},{key:"anchorInline",get:function(){return this.anchorKey&&this.document.getClosestInline(this.anchorKey)}},{key:"focusInline",get:function(){return this.focusKey&&this.document.getClosestInline(this.focusKey)}},{key:"startText",get:function(){return this.startKey&&this.document.getDescendant(this.startKey)}},{key:"endText",get:function(){return this.endKey&&this.document.getDescendant(this.endKey)}},{key:"anchorText",get:function(){return this.anchorKey&&this.document.getDescendant(this.anchorKey)}},{key:"focusText",get:function(){return this.focusKey&&this.document.getDescendant(this.focusKey)}},{key:"nextBlock",get:function(){return this.endKey&&this.document.getNextBlock(this.endKey)}},{key:"previousBlock",get:function(){return this.startKey&&this.document.getPreviousBlock(this.startKey)}},{key:"nextInline",get:function(){return this.endKey&&this.document.getNextInline(this.endKey)}},{key:"previousInline",get:function(){return this.startKey&&this.document.getPreviousInline(this.startKey)}},{key:"nextText",get:function(){return this.endKey&&this.document.getNextText(this.endKey)}},{key:"previousText",get:function(){return this.startKey&&this.document.getPreviousText(this.startKey)}},{key:"characters",get:function(){return this.selection.isUnset?new t.List:this.document.getCharactersAtRange(this.selection)}},{key:"marks",get:function(){return this.selection.isUnset?new t.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new t.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new t.List:this.document.getBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?mn.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new t.List:this.document.getInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new t.List:this.document.getTextsAtRange(this.selection)}},{key:"isEmpty",get:function(){return!!this.isCollapsed||(0==this.endOffset||0==this.startOffset)&&this.fragment.isEmpty}},{key:"isInVoid",get:function(){return!this.isExpanded&&this.document.hasVoidParent(this.startKey)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.isValue(e))return e;if(f(e))return r.fromJS(e,t);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isValue(e))return{data:e.data,decorations:e.decorations,schema:e.schema};if(f(e)){var t={};return"data"in e&&(t.data=fn.create(e.data)),"decorations"in e&&(t.decorations=bn.createList(e.decorations)),"schema"in e&&(t.schema=ai.create(e.schema)),t}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJS",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.document,a=void 0===o?{}:o,i=e.selection,s=void 0===i?{}:i,u=e.schema,c=void 0===u?{}:u,l=e.history,f=void 0===l?{}:l,d=new t.Map;a=mn.fromJS(a);var y=s,h=y.anchorPath,v=y.focusPath,p=y.anchorKey,g=y.focusKey;if(void 0!==h&&void 0===p&&(s.anchorKey=a.assertPath(h).key),void 0!==v&&void 0===g&&(s.focusKey=a.assertPath(v).key),s=bn.fromJS(s),c=ai.fromJS(c),f=Sa.fromJS(f),n.plugins){var k=!0,m=!1,b=void 0;try{for(var A,O=n.plugins[Symbol.iterator]();!(k=(A=O.next()).done);k=!0){var w=A.value;w.data&&(d=d.merge(w.data))}}catch(e){m=!0,b=e}finally{try{!k&&O.return&&O.return()}finally{if(m)throw b}}}if("data"in e&&(d=d.merge(e.data)),s.isUnset){var x=a.getFirstText();x&&(s=s.collapseToStartOf(x))}var S=new r({data:d,document:a,selection:s,schema:c,history:f});return!1!==n.normalize&&(S=S.change({save:!1}).normalize().value),S}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isValue",value:function(e){return!(!e||!e[I.VALUE])}}]),r}(t.Record(ui));ci.prototype[I.VALUE]=!0;var li={length:void 0,mark:void 0,marks:void 0,newPath:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,selection:void 0,target:void 0,text:void 0,type:void 0,value:void 0},fi=function(e){function r(){return X(this,r),te(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Q(r,e),Y(r,[{key:"toJS",value:function(){var e=this.object,t=this.type,r={object:e,type:t},n=Un[t],o=!0,a=!1,i=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,l=this[c];if("document"!=c&&("selection"!=c&&"value"!=c&&("node"!=c||"insert_node"==t))){if("mark"!=c&&"marks"!=c&&"node"!=c||(l=l.toJS()),"properties"==c&&"merge_node"==t){var f={};"data"in l&&(f.data=l.data.toJS()),"type"in l&&(f.type=l.type),l=f}if("properties"==c&&"set_mark"==t){var d={};"data"in l&&(d.data=l.data.toJS()),"type"in l&&(d.type=l.type),l=d}if("properties"==c&&"set_node"==t){var y={};"data"in l&&(y.data=l.data.toJS()),"isVoid"in l&&(y.isVoid=l.isVoid),"type"in l&&(y.type=l.type),l=y}if("properties"==c&&"set_selection"==t){var h={};"anchorOffset"in l&&(h.anchorOffset=l.anchorOffset),"anchorPath"in l&&(h.anchorPath=l.anchorPath),"focusOffset"in l&&(h.focusOffset=l.focusOffset),"focusPath"in l&&(h.focusPath=l.focusPath),"isBackward"in l&&(h.isBackward=l.isBackward),"isFocused"in l&&(h.isFocused=l.isFocused),"marks"in l&&(h.marks=null==l.marks?null:l.marks.toJS()),l=h}if("properties"==c&&"set_value"==t){var v={};"data"in l&&(v.data=l.data.toJS()),"decorations"in l&&(v.decorations=l.decorations.toJS()),"schema"in l&&(v.schema=l.schema.toJS()),l=v}if("properties"==c&&"split_node"==t){var p={};"data"in l&&(p.data=l.data.toJS()),"type"in l&&(p.type=l.type),l=p}r[c]=l}}}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return r}},{key:"toJSON",value:function(e){return J.deprecate("slate@0.35.0","toJSON methods are deprecated, use toJS instead"),this.toJS(e)}},{key:"object",get:function(){return"operation"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.isOperation(e))return e;if(f(e))return r.fromJS(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.List.isList(e)||Array.isArray(e))return new t.List(e.map(r.create));throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJS",value:function(e){if(r.isOperation(e))return e;var t=e.type,n=e.value,o=Un[t],a={type:t};if(!o)throw new Error('`Operation.fromJS` was passed an unrecognized operation type: "'+t+'"');var i=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value,d=e[f];if(void 0===d){if("document"==f)continue;if("selection"==f)continue;if("value"==f)continue;if("node"==f&&"insert_node"!=t)continue;throw new Error('`Operation.fromJS` was passed a "'+t+'" operation without the required "'+f+'" attribute.')}if("mark"==f&&(d=yn.create(d)),"marks"==f&&null!=d&&(d=yn.createSet(d)),"node"==f&&(d=Kn.create(d)),"selection"==f&&(d=bn.create(d)),"value"==f&&(d=ci.create(d)),"properties"==f&&"merge_node"==t&&(d=Kn.createProperties(d)),"properties"==f&&"set_mark"==t&&(d=yn.createProperties(d)),"properties"==f&&"set_node"==t&&(d=Kn.createProperties(d)),"properties"==f&&"set_selection"==t){var y=d,h=y.anchorKey,v=y.focusKey,p=ee(y,["anchorKey","focusKey"]);d=bn.createProperties(p),void 0!==h&&(d.anchorPath=null===h?null:n.document.getPath(h)),void 0!==v&&(d.focusPath=null===v?null:n.document.getPath(v))}"properties"==f&&"set_value"==t&&(d=ci.createProperties(d)),"properties"==f&&"split_node"==t&&(d=Kn.createProperties(d)),a[f]=d}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}return new r(a)}},{key:"fromJSON",value:function(e){return J.deprecate("slate@0.35.0","fromJSON methods are deprecated, use fromJS instead"),r.fromJS(e)}},{key:"isOperation",value:function(e){return!(!e||!e[I.OPERATION])}},{key:"isOperationList",value:function(e){return t.List.isList(e)&&e.every(function(e){return r.isOperation(e)})}}]),r}(t.Record(li));fi.prototype[I.OPERATION]=!0;var di=De("slate:operation:invert");function yi(e){var t=(e=fi.create(e)).type;if(di(t,e),"insert_node"==t)return e.set("type","remove_node");if("remove_node"==t)return e.set("type","insert_node");if("move_node"==t){var r=e,n=r.newPath,o=r.path,a=n,i=o,s=o.length-1,u=n.length-1;return o.length<a.length&&o.slice(0,s).every(function(e,t){return e==a[t]})&&o[s]<a[s]&&(a=a.slice(0,s).concat([a[s]-1]).concat(a.slice(s+1,a.length))),n.length<i.length&&n.slice(0,u).every(function(e,t){return e==i[t]})&&n[u]<=i[u]&&(i=i.slice(0,u).concat([i[u]+1]).concat(i.slice(u+1,i.length))),e.set("path",a).set("newPath",i)}if("merge_node"==t){var c=e.path,l=c.length-1,f=c.slice(0,l).concat([c[l]-1]);return e.set("type","split_node").set("path",f)}if("split_node"==t){var d=e.path,y=d.length-1,h=d.slice(0,y).concat([d[y]+1]);return e.set("type","merge_node").set("path",h)}if("set_node"==t){var v=e,p=v.properties,g=v.node,k=g.merge(p),m=un(g,Object.keys(p));return e.set("node",k).set("properties",m)}if("insert_text"==t)return e.set("type","remove_text");if("remove_text"==t)return e.set("type","insert_text");if("add_mark"==t)return e.set("type","remove_mark");if("remove_mark"==t)return e.set("type","add_mark");if("set_mark"==t){var b=e,A=b.properties,O=b.mark,w=O.merge(A),x=un(O,Object.keys(A));return e.set("mark",w).set("properties",x)}if("set_selection"==t){var S=e,B=S.properties,F=S.selection,T=S.value,K=B.anchorPath,j=B.focusPath,_=ee(B,["anchorPath","focusPath"]),E=T.document;void 0!==K&&(_.anchorKey=null===K?null:E.assertPath(K).key),void 0!==j&&(_.focusKey=null===j?null:E.assertPath(j).key);var C=F.merge(_),N=un(F,Object.keys(_));return void 0!==K&&(N.anchorPath=null===N.anchorKey?null:E.getPath(N.anchorKey),delete N.anchorKey),void 0!==j&&(N.focusPath=null===N.focusKey?null:E.getPath(N.focusKey),delete N.focusKey),e.set("selection",C).set("properties",N)}if("set_value"==t){var z=e,P=z.properties,L=z.value,D=L.merge(P),M=un(L,Object.keys(P));return e.set("value",D).set("properties",M)}}var hi=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e};var vi=function(e,t){return e&&Ua(t,Qo(t),e)};var pi=function(e,t){return e&&Ua(t,qa(t),e)};var gi=function(e,t){return Ua(e,No(e),t)},ki=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Wr(t,No(e)),e=Na(e);return t}:_o;var mi=function(e,t){return Ua(e,ki(e),t)};var bi=function(e){return Ko(e,qa,ki)},Ai=Object.prototype.hasOwnProperty;var Oi=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Ai.call(e,"index")&&(r.index=e.index,r.input=e.input),r};var wi=function(e,t){var r=t?Ka(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)};var xi=function(e,t){return e.set(t[0],t[1]),e};var Si=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r},Bi=1;var Fi=function(e,t,r){var n=t?r(lo(e),Bi):lo(e);return Si(n,xi,new e.constructor)},Ti=/\w*$/;var Ki=function(e){var t=new e.constructor(e.source,Ti.exec(e));return t.lastIndex=e.lastIndex,t};var ji=function(e,t){return e.add(t),e},_i=1;var Ei=function(e,t,r){var n=t?r(fo(e),_i):fo(e);return Si(n,ji,new e.constructor)},Ci=Ve?Ve.prototype:void 0,Ni=Ci?Ci.valueOf:void 0;var zi=function(e){return Ni?Object(Ni.call(e)):{}},Pi="[object Boolean]",Li="[object Date]",Di="[object Map]",Mi="[object Number]",Ri="[object RegExp]",Ji="[object Set]",Ii="[object String]",Vi="[object Symbol]",Ui="[object ArrayBuffer]",Wi="[object DataView]",Hi="[object Float32Array]",$i="[object Float64Array]",qi="[object Int8Array]",Gi="[object Int16Array]",Xi="[object Int32Array]",Yi="[object Uint8Array]",Zi="[object Uint8ClampedArray]",Qi="[object Uint16Array]",es="[object Uint32Array]";var ts=function(e,t,r,n){var o=e.constructor;switch(t){case Ui:return Ka(e);case Pi:case Li:return new o(+e);case Wi:return wi(e,n);case Hi:case $i:case qi:case Gi:case Xi:case Yi:case Zi:case Qi:case es:return ja(e,n);case Di:return Fi(e,n,r);case Mi:case Ii:return new o(e);case Ri:return Ki(e);case Ji:return Ei(e,n,r);case Vi:return zi(e)}},rs=1,ns=2,os=4,as="[object Arguments]",is="[object Function]",ss="[object GeneratorFunction]",us="[object Object]",cs={};cs[as]=cs["[object Array]"]=cs["[object ArrayBuffer]"]=cs["[object DataView]"]=cs["[object Boolean]"]=cs["[object Date]"]=cs["[object Float32Array]"]=cs["[object Float64Array]"]=cs["[object Int8Array]"]=cs["[object Int16Array]"]=cs["[object Int32Array]"]=cs["[object Map]"]=cs["[object Number]"]=cs[us]=cs["[object RegExp]"]=cs["[object Set]"]=cs["[object String]"]=cs["[object Symbol]"]=cs["[object Uint8Array]"]=cs["[object Uint8ClampedArray]"]=cs["[object Uint16Array]"]=cs["[object Uint32Array]"]=!0,cs["[object Error]"]=cs[is]=cs["[object WeakMap]"]=!1;var ls=function e(t,r,n,o,a,i){var s,u=r&rs,c=r&ns,l=r&os;if(n&&(s=a?n(t,o,a,i):n(t)),void 0!==s)return s;if(!st(t))return t;var f=Me(t);if(f){if(s=Oi(t),!u)return _a(t,s)}else{var d=ha(t),y=d==is||d==ss;if(Lo(t))return Ta(t,u);if(d==us||d==as||y&&!a){if(s=c||y?{}:za(t),!u)return c?mi(t,pi(s,t)):gi(t,vi(s,t))}else{if(!cs[d])return a?t:{};s=ts(t,d,e,u)}}i||(i=new Zn);var h=i.get(t);if(h)return h;i.set(t,s);var v=l?c?bi:ea:c?keysIn:Qo,p=f?void 0:v(t);return hi(p||t,function(o,a){p&&(o=t[a=o]),Fr(s,a,e(o,r,n,a,t,i))}),s};var fs=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var ds=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a};var ys=function(e,t){return t.length<2?e:wr(e,ds(t,0,-1))};var hs=function(e,t){return t=br(t,e),null==(e=ys(e,t))||delete e[Or(fs(t))]};var vs=function(e){return Va(e)?void 0:e},ps=sn(function(e,t){var r={};if(null==e)return r;var n=!1;t=hr(t,function(t){return t=br(t,e),n||(n=t.length>1),t}),Ua(e,bi(e),r),n&&(r=ls(r,7,vs));for(var o=t.length;o--;)hs(r,t[o]);return r}),gs={redo:function(e){var t=e.value,r=t.history;if(r){var n=r,o=n.undos,a=n.redos,i=a.peek();i&&(a=a.pop(),o=o.push(i),i.forEach(function(t){var r=t,n=r.type,o=r.properties;"set_selection"==n&&(t=t.set("properties",ps(o,"isFocused"))),e.applyOperation(t,{save:!1})}),t=e.value,r=r.set("undos",o).set("redos",a),t=t.set("history",r),e.value=t)}},undo:function(e){var t=e.value,r=t.history;if(r){var n=r,o=n.undos,a=n.redos,i=o.peek();i&&(o=o.pop(),a=a.push(i),i.slice().reverse().map(yi).forEach(function(t){var r=t,n=r.type,o=r.properties;"set_selection"==n&&(t=t.set("properties",ps(o,"isFocused"))),e.applyOperation(t,{save:!1})}),t=e.value,r=r.set("undos",o).set("redos",a),t=t.set("history",r),e.value=t)}}},ks=Object.prototype.hasOwnProperty,ms=Object.prototype.toString;var bs=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(e.toString==ms)switch(e.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(ks.call(e,t))return!1;return!0}return!1},As={select:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=bn.createProperties(t);var n=r.snapshot,o=void 0!==n&&n,a=e.value,i=a.document,s=a.selection,u={},c=s.toJS(),l=s.merge(t).normalize(i);for(var f in t=un(l,Object.keys(t)))0==o&&t[f]==c[f]||(u[f]=t[f]);var d=["anchorKey","anchorOffset","focusKey","focusOffset"].some(function(e){return u.hasOwnProperty(e)});c.marks&&t.marks==c.marks&&d&&(u.marks=null),bs(u)||e.applyOperation({type:"set_selection",value:a,properties:u,selection:c},o?{skip:!1,merge:!1}:{})},selectAll:function(e){var t=e.value,r=t.document,n=t.selection.moveToRangeOf(r);e.select(n)},snapshotSelection:function(e){var t=e.value.selection;e.select(t,{snapshot:!0})},moveAnchorCharBackward:function(e){var t=e.value,r=t.document,n=t.selection,o=t.anchorText,a=t.anchorBlock,i=n.anchorOffset,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);!u&&i>0?e.moveAnchor(-1):s&&(e.moveAnchorToEndOf(s),u||c||!a.hasNode(s.key)||e.moveAnchor(-1))},moveAnchorCharForward:function(e){var t=e.value,r=t.document,n=t.selection,o=t.anchorText,a=t.anchorBlock,i=n.anchorOffset,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);!u&&i<o.text.length?e.moveAnchor(1):s&&(e.moveAnchorToStartOf(s),u||c||!a.hasNode(s.key)||e.moveAnchor(1))},moveFocusCharBackward:function(e){var t=e.value,r=t.document,n=t.selection,o=t.focusText,a=t.focusBlock,i=n.focusOffset,s=r.getPreviousText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);!u&&i>0?e.moveFocus(-1):s&&(e.moveFocusToEndOf(s),u||c||!a.hasNode(s.key)||e.moveFocus(-1))},moveFocusCharForward:function(e){var t=e.value,r=t.document,n=t.selection,o=t.focusText,a=t.focusBlock,i=n.focusOffset,s=r.getNextText(o.key),u=r.hasVoidParent(o.key),c=s&&r.hasVoidParent(s.key);!u&&i<o.text.length?e.moveFocus(1):s&&(e.moveFocusToStartOf(s),u||c||!a.hasNode(s.key)||e.moveFocus(1))}};["Forward","Backward"].forEach(function(e){var t="moveAnchorChar"+e,r="moveFocusChar"+e;As["moveChar"+e]=function(e){e[t]()[r]()},As["moveStartChar"+e]=function(e){e.value.isBackward?e[r]():e[t]()},As["moveEndChar"+e]=function(e){e.value.isBackward?e[t]():e[r]()},As["extendChar"+e]=function(t){t["moveFocusChar"+e]()},As["collapseChar"+e]=function(t){t["Forward"==e?"collapseToEnd":"collapseToStart"]()["moveChar"+e]()}});[["collapseLineBackward","collapseToStartOfBlock"],["collapseLineForward","collapseToEndOfBlock"],["extendLineBackward","extendToStartOfBlock"],["extendLineForward","extendToEndOfBlock"]].forEach(function(e){var t=re(e,2),r=t[0],n=t[1];As[r]=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e[n].apply(e,[e].concat(r))}});["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"].forEach(function(e){As[e]=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a="deselect"!=e,i=t.value,s=i.document,u=i.selection,c=u[e].apply(u,n);a&&(c=c.normalize(s)),t.select(c)}});var Os=["Next","Previous"],ws=["Block","Inline","Text"];["moveTo","moveAnchorTo","moveFocusTo","moveStartTo","moveEndTo","collapseTo","extendTo"].forEach(function(e){var t=["Start","End"];"moveTo"==e&&t.push("Range"),t.forEach(function(t){var r=""+e+t+"Of";ws.forEach(function(e){var t="Text"==e?"getNode":"getClosest"+e;As[""+r+e]=function(e){var n=e.value,o=n.document,a=n.selection,i=o[t](a.startKey);i&&e[r](i)},Os.forEach(function(n){var o="get"+n+e,a="Next"==n?"startKey":"endKey";As[""+r+n+e]=function(e){var n=e.value,i=n.document,s=n.selection,u=i[t](s[a]);if(u){var c=i[o](u.key);c&&e[r](c)}}})})})});var xs={setValue:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=ci.createProperties(t);var n=e.value;e.applyOperation({type:"set_value",properties:t,value:n},r)}},Ss={};function Bs(e,t,r){var n=r.stack.plugins.length+1,o=0;!function e(t,a){var i=a.validate(r);if(i){var s=t.value.document.getPath(a.key);if(i(t),a=t.value.document.refindNode(s,a.key)){if(s=t.value.document.refindPath(s,a.key),++o>n)throw new Error("A schema rule could not be validated after sufficient iterations. This is usually due to a `rule.validate` or `rule.normalize` function of a schema being incorrectly written, causing an infinite loop.");e(t,a)}}}(e,t)}Ss.normalize=function(e){e.normalizeDocument()},Ss.normalizeDocument=function(e){var t=e.value.document;e.normalizeNodeByKey(t.key)},Ss.normalizeNodeByKey=function(e,t){var r=e.value,n=r.document,o=r.schema,a=n.assertNode(t);!function e(t,r,n){if("text"==r.object)return void Bs(t,r,n);var o=r.getFirstInvalidDescendant(n);var a=t.value.document.getPath(r.key);for(;r&&o;)e(t,o,n),(r=t.value.document.refindNode(a,r.key))?(a=t.value.document.refindPath(a,r.key),o=r.getFirstInvalidDescendant(n)):(a=[],o=null);r&&Bs(t,r,n)}(e,a,o);var i=(n=e.value.document).getAncestors(t);i&&i.forEach(function(t){e.value.document.getDescendant(t.key)&&Bs(e,t,o)})};var Fs=Z({},pn,In,Vn,gs,As,xs,Ss),Ts=De("slate:operation:apply");function Ks(e,t,r){if(e.selection&&t(e.selection)&&(e=e.set("selection",r(e.selection))),!e.decorations)return e;var n=e.decorations.map(function(e){return t(e)?r(e):e}).filter(function(e){return null!==e.anchorKey});return e.set("decorations",n)}function js(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ks(e,function(e){if(!e.isAtomic)return!1;var o=e.startKey,a=e.startOffset,i=e.endKey,s=e.endOffset;return o==t&&a<r&&(i!=t||s>r)||n&&o==t&&a<n&&(i!=t||s>n)},function(e){return e.deselect()})}var _s={add_mark:function(e,t){var r=t.path,n=t.offset,o=t.length,a=t.mark,i=e.document,s=i.assertPath(r);return s=s.addMark(n,o,a),i=i.updateNode(s),e=e.set("document",i)},insert_node:function(e,t){var r=t.path,n=t.node,o=r[r.length-1],a=r.slice(0,-1),i=e.document,s=i.assertPath(a);return s=s.insertNode(o,n),i=i.updateNode(s),e=e.set("document",i)},insert_text:function(e,t){var r=t.path,n=t.offset,o=t.text,a=t.marks,i=e.document,s=i.assertPath(r);return s=s.insertText(n,o,a),i=i.updateNode(s),e=Ks(e=Ks(e=js(e=e.set("document",i),s.key,n),function(e){var t=e.anchorKey,r=e.anchorOffset,o=e.isBackward,a=e.isAtomic;return t==s.key&&(r>n||r==n&&(!a||!o))},function(e){return e.moveAnchor(o.length)}),function(e){var t=e.focusKey,r=e.focusOffset,o=e.isBackward,a=e.isAtomic;return t==s.key&&(r>n||r==n&&(!a||o))},function(e){return e.moveFocus(o.length)})},merge_node:function(e,t){var r=t.path,n=r.slice(0,r.length-1).concat([r[r.length-1]-1]),o=e.document,a=o.assertPath(n),i=o.assertPath(r),s=o.getParent(a.key),u=s.nodes.indexOf(a),c=s.nodes.indexOf(i);return s=s.mergeNode(u,c),o=o.updateNode(s),e=e.set("document",o),"text"==a.object&&(e=Ks(e,function(e){var t=e.anchorKey,r=e.focusKey;return t==i.key||r==i.key},function(e){return e.anchorKey==i.key&&(e=e.moveAnchorTo(a.key,a.text.length+e.anchorOffset)),e.focusKey==i.key&&(e=e.moveFocusTo(a.key,a.text.length+e.focusOffset)),e.normalize(o)})),e},move_node:function(e,t){var r=t.path,n=t.newPath,o=n[n.length-1],a=n.slice(0,-1),i=r.slice(0,-1),s=r[r.length-1],u=e.document,c=u.assertPath(r),l=u.getParent(c.key);l=l.removeNode(s),u=u.updateNode(l);var f=void 0;return i.every(function(e,t){return e===a[t]})&&i.length===a.length?f=l:i.every(function(e,t){return e===a[t]})&&s<a[i.length]?(a[i.length]--,f=u.assertPath(a)):f=u.assertPath(a),f=f.insertNode(o,c),u=u.updateNode(f),e=e.set("document",u)},remove_mark:function(e,t){var r=t.path,n=t.offset,o=t.length,a=t.mark,i=e.document,s=i.assertPath(r);return s=s.removeMark(n,o,a),i=i.updateNode(s),e=e.set("document",i)},remove_node:function(e,t){var r=t.path,n=e,o=n.document,a=n.selection,i=o.assertPath(r);if(a.isSet||null!==e.decorations){var s="text"==i.object?i:i.getFirstText()||i,u="text"==i.object?i:i.getLastText()||i,c=o.getPreviousText(s.key),l=o.getNextText(u.key);e=Ks(e,function(e){var t=e.startKey,r=e.endKey;return i.hasNode(t)||i.hasNode(r)},function(e){var t=e,r=t.startKey,n=t.endKey;return i.hasNode(r)&&(e=c?e.moveStartTo(c.key,c.text.length):l?e.moveStartTo(l.key,0):e.deselect()),i.hasNode(n)&&(e=c?e.moveEndTo(c.key,c.text.length):l?e.moveEndTo(l.key,0):e.deselect()),e.isSet?e.normalize(o):e})}var f=o.getParent(i.key),d=f.nodes.indexOf(i);return f=f.removeNode(d),o=o.updateNode(f),e=e.set("document",o)},remove_text:function(e,t){var r=t.path,n=t.offset,o=t.text.length,a=n+o,i=e.document,s=i.assertPath(r);return e=Ks(e=Ks(e=js(e,s.key,n,n+o),function(e){return e.anchorKey==s.key},function(e){return e.anchorOffset>=a?e.moveAnchor(-o):e.anchorOffset>n?e.moveAnchorTo(e.anchorKey,n):e}),function(e){return e.focusKey==s.key},function(e){return e.focusOffset>=a?e.moveFocus(-o):e.focusOffset>n?e.moveFocusTo(e.focusKey,n):e}),s=s.removeText(n,o),i=i.updateNode(s),e=e.set("document",i)},set_mark:function(e,t){var r=t.path,n=t.offset,o=t.length,a=t.mark,i=t.properties,s=e.document,u=s.assertPath(r);return u=u.updateMark(n,o,a,i),s=s.updateNode(u),e=e.set("document",s)},set_node:function(e,t){var r=t.path,n=t.properties,o=e.document,a=o.assertPath(r);return a=a.merge(n),o=o.updateNode(a),e=e.set("document",o)},set_selection:function(e,t){var r=t.properties,n=r.anchorPath,o=r.focusPath,a=ee(r,["anchorPath","focusPath"]),i=e,s=i.document,u=i.selection;return void 0!==n&&(a.anchorKey=null===n?null:s.assertPath(n).key),void 0!==o&&(a.focusKey=null===o?null:s.assertPath(o).key),u=(u=u.merge(a)).normalize(s),e=e.set("selection",u)},set_value:function(e,t){var r=t.properties;return e=e.merge(r)},split_node:function(e,t){var r=t.path,n=t.position,o=t.properties,a=e.document,i=a.assertPath(r),s=a.getParent(i.key),u=s.nodes.indexOf(i);if(s=s.splitNode(u,n),o){var c=s.nodes.get(u+1);"text"!==c.object&&(s=s.updateNode(c.merge(o)))}var l=(a=a.updateNode(s)).getNextText(i.key);return e=(e=Ks(e,function(e){var t=e.startKey,r=e.startOffset,o=e.endKey,a=e.endOffset;return i.key==t&&n<=r||i.key==o&&n<=a},function(e){var t=e,r=t.startKey,o=t.startOffset,s=t.endKey,u=t.endOffset,c=!1;return i.key==r&&n<=o&&(e=e.moveStartTo(l.key,o-n),c=!0),i.key==s&&n<=u&&(e=e.moveEndTo(l.key,u-n),c=!0),c?e.normalize(a):e})).set("document",a)}};function Es(e,t){var r=(t=fi.create(t)).type,n=_s[r];if(!n)throw new Error('Unknown operation type: "'+r+'".');return Ts(r,t),e=n(e,t)}var Cs=De("slate:change"),Ns=function(){function e(r){X(this,e);var n=r.value;this.value=n,this.operations=new t.List,this.flags=Z({normalize:!0},un(r,["merge","save","normalize"]))}return Y(e,[{key:"applyOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.operations,n=this.flags,o=this.value,a=o.history;f(e)&&(e=Z({},e,{value:o})),e=fi.create(e);var i=t=Z({},n,t),s=i.merge,u=void 0===s?0!=r.size||null:s,c=i.save,l=void 0===c||c,d=i.skip,y=void 0===d?null:d;return Cs("apply",{operation:e,save:l,merge:u}),o=Es(o,e),a&&l&&(a=a.save(e,{merge:u,skip:y}),o=o.set("history",a)),this.value=o,this.operations=r.push(e),this}},{key:"applyOperations",value:function(e,t){var r=this;return e.forEach(function(e){return r.applyOperation(e,t)}),this}},{key:"call",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this].concat(r)),this}},{key:"withoutNormalization",value:function(e){var t=this.flags.normalize;this.setOperationFlag("normalize",!1);try{e(this),this.normalizeDocument()}finally{this.setOperationFlag("normalize",t)}return this}},{key:"setOperationFlag",value:function(e,t){return this.flags[e]=t,this}},{key:"getFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==t[e]?t[e]:this.flags[e]}},{key:"unsetOperationFlag",value:function(e){return delete this.flags[e],this}},{key:"object",get:function(){return"change"}},{key:"kind",get:function(){return J.deprecate("slate@0.32.0","The `kind` property of Slate objects has been renamed to `object`."),this.object}}]),e}();Ns.isChange=V.bind(null,"CHANGE"),Ns.prototype[I.CHANGE]=!0,Object.keys(Fs).forEach(function(e){Ns.prototype[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cs(e,{args:r}),this.call.apply(this,[Fs[e]].concat(r)),this}});var zs={apply:Es,invert:yi},Ps={Block:ae,Changes:Fs,Character:xn,Data:fn,Document:mn,History:Sa,Inline:ln,Leaf:Bn,Mark:yn,Node:Kn,Operation:fi,Operations:zs,Range:bn,Schema:ai,Stack:ri,Text:Tn,Value:ci,resetKeyGenerator:q,setKeyGenerator:$,resetMemoization:s,useMemoization:u};e.Block=ae,e.Change=Ns,e.Changes=Fs,e.Character=xn,e.Data=fn,e.Document=mn,e.History=Sa,e.Inline=ln,e.Leaf=Bn,e.Mark=yn,e.Node=Kn,e.Operation=fi,e.Operations=zs,e.Range=bn,e.Schema=ai,e.Stack=ri,e.Text=Tn,e.Value=ci,e.resetKeyGenerator=q,e.setKeyGenerator=$,e.resetMemoization=s,e.useMemoization=u,e.default=Ps,Object.defineProperty(e,"__esModule",{value:!0})});
