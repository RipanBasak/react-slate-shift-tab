#!/usr/bin/env node
'use strict';

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _jsYaml = require('js-yaml');

var _jsYaml2 = _interopRequireDefault(_jsYaml);

var _slate = require('slate');

var _slate2 = _interopRequireDefault(_slate);

var _meow = require('meow');

var _meow2 = _interopRequireDefault(_meow);

var _ = require('../');

var _2 = _interopRequireDefault(_);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var inputPath = (0, _meow2.default)('\n    Usage\n        $ slate-hyperprint <path>\n').input[0];

if (inputPath) {
    var ext = _path2.default.extname(inputPath);

    var json = void 0;
    switch (ext) {
        case '.yaml':
        case '.yml':
            json = _jsYaml2.default.safeLoad(_fs2.default.readFileSync(inputPath));
            break;
        case '.json':
        case '.js':
            // eslint-disable-next-line
            json = require(inputPath);
            break;
        default:
            throw new Error('The slate-hyperprint CLI only supports YAML, JSON and JS inputs');
    }

    var document = json.value && json.value.document || json.state && json.state.document || json.document || json;
    // COMPAT: Use Value or State
    var state = (_slate2.default.Value || _slate2.default.State).create({ document: document });

    // eslint-disable-next-line no-console
    console.log((0, _2.default)(state.document));
}